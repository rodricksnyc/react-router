{"version":3,"file":"DashboardFilter.js","names":["DashboardFilter","filter","sdk","rest","id","name","type","field","required","ui_config","allow_multiple_values","useContext","FilterContext","removeFilter","useEffect","stateProps","useExpressionState","useSuggestable","errorMessage","suggestableProps","validationMessage","useValidationMessage","expression"],"sources":["../../../src/DashboardFilter/DashboardFilter.tsx"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\nimport React, { useContext, useEffect } from 'react'\nimport { Field, Status, Tooltip } from '@looker/components'\nimport { Filter } from '../Filter/Filter'\nimport { useValidationMessage } from '../Filter/utils'\nimport type { UseSuggestableProps } from './use_suggestable'\nimport { useSuggestable } from './use_suggestable'\nimport type { UseExpressionStateProps } from './use_expression_state'\nimport { useExpressionState } from './use_expression_state'\nimport { FilterContext } from '../FilterCollection'\n\nexport type DashboardFilterProps = UseExpressionStateProps & UseSuggestableProps\n\n/**\n * Renders a dashboard filter, including label and validation, and fetches suggestions\n * if necessary. For rendering just the filter input control on its own, see `Filter`.\n */\nexport const DashboardFilter = ({\n  filter,\n  sdk,\n  ...rest\n}: DashboardFilterProps) => {\n  const { id, name, type, field, required, ui_config, allow_multiple_values } =\n    filter\n\n  const { removeFilter } = useContext(FilterContext)\n\n  useEffect(() => {\n    return () => {\n      removeFilter(filter)\n    }\n  }, [removeFilter, filter])\n\n  const stateProps = useExpressionState({ filter, ...rest })\n\n  const { errorMessage, suggestableProps } = useSuggestable({\n    filter,\n    sdk,\n  })\n\n  const validationMessage = useValidationMessage(\n    stateProps.expression,\n    required\n  )\n\n  return (\n    <Field\n      id={id || ''}\n      label={name || ''}\n      detail={\n        errorMessage && (\n          <Tooltip content={errorMessage}>\n            <Status intent=\"critical\" data-testid=\"error-icon\" />\n          </Tooltip>\n        )\n      }\n      validationMessage={validationMessage}\n    >\n      <Filter\n        name={name || ''}\n        type={type || ''}\n        field={field}\n        config={ui_config}\n        isRequired={required}\n        {...suggestableProps}\n        {...stateProps}\n        allowMultipleValues={!!allow_multiple_values}\n      />\n    </Field>\n  )\n}\n"],"mappings":";;;;;;;;;;;AAIA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAAmD;AAAA;AAAA;AAAA;AAAA;AAQ5C,IAAMA,eAAe,GAAG,SAAlBA,eAAe,OAIA;EAAA,IAH1BC,MAAM,QAANA,MAAM;IACNC,GAAG,QAAHA,GAAG;IACAC,IAAI;EAEP,IAAQC,EAAE,GACRH,MAAM,CADAG,EAAE;IAAEC,IAAI,GACdJ,MAAM,CADII,IAAI;IAAEC,IAAI,GACpBL,MAAM,CADUK,IAAI;IAAEC,KAAK,GAC3BN,MAAM,CADgBM,KAAK;IAAEC,QAAQ,GACrCP,MAAM,CADuBO,QAAQ;IAAEC,SAAS,GAChDR,MAAM,CADiCQ,SAAS;IAAEC,qBAAqB,GACvET,MAAM,CAD4CS,qBAAqB;EAGzE,kBAAyB,IAAAC,iBAAU,EAACC,+BAAa,CAAC;IAA1CC,YAAY,eAAZA,YAAY;EAEpB,IAAAC,gBAAS,EAAC,YAAM;IACd,OAAO,YAAM;MACXD,YAAY,CAACZ,MAAM,CAAC;IACtB,CAAC;EACH,CAAC,EAAE,CAACY,YAAY,EAAEZ,MAAM,CAAC,CAAC;EAE1B,IAAMc,UAAU,GAAG,IAAAC,wCAAkB;IAAGf,MAAM,EAANA;EAAM,GAAKE,IAAI,EAAG;EAE1D,sBAA2C,IAAAc,+BAAc,EAAC;MACxDhB,MAAM,EAANA,MAAM;MACNC,GAAG,EAAHA;IACF,CAAC,CAAC;IAHMgB,YAAY,mBAAZA,YAAY;IAAEC,gBAAgB,mBAAhBA,gBAAgB;EAKtC,IAAMC,iBAAiB,GAAG,IAAAC,2BAAoB,EAC5CN,UAAU,CAACO,UAAU,EACrBd,QAAQ,CACT;EAED,OACE,gCAAC,iBAAK;IACJ,EAAE,EAAEJ,EAAE,IAAI,EAAG;IACb,KAAK,EAAEC,IAAI,IAAI,EAAG;IAClB,MAAM,EACJa,YAAY,IACV,gCAAC,mBAAO;MAAC,OAAO,EAAEA;IAAa,GAC7B,gCAAC,kBAAM;MAAC,MAAM,EAAC,UAAU;MAAC,eAAY;IAAY,EAAG,CAG1D;IACD,iBAAiB,EAAEE;EAAkB,GAErC,gCAAC,cAAM;IACL,IAAI,EAAEf,IAAI,IAAI,EAAG;IACjB,IAAI,EAAEC,IAAI,IAAI,EAAG;IACjB,KAAK,EAAEC,KAAM;IACb,MAAM,EAAEE,SAAU;IAClB,UAAU,EAAED;EAAS,GACjBW,gBAAgB,EAChBJ,UAAU;IACd,mBAAmB,EAAE,CAAC,CAACL;EAAsB,GAC7C,CACI;AAEZ,CAAC;AAAA"}