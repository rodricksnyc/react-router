{"version":3,"file":"Past.js","names":["Past","item","onChange","field","id","value","unit","complete","valueChange","e","newValue","String","target","split","map","Number","unitChange","option","options","find","selectedUnit","fiscalPastUnits","useFiscalPastUnits","pastUnits","usePastUnits","showFiscalUnits","formattedOptions","useMemo","label"],"sources":["../../../../../../../../../src/Filter/components/AdvancedFilter/components/DateFilter/components/Past/Past.tsx"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\nimport type { FilterModel } from '@looker/filter-expressions'\nimport type { ILookmlModelExploreField } from '@looker/sdk'\nimport type { ChangeEvent } from 'react'\nimport React, { useMemo } from 'react'\nimport { useFiscalPastUnits, usePastUnits } from '../../../../../../constants'\nimport { showFiscalUnits } from '../../../../utils/show_fiscal_units'\nimport { GroupSelect } from '../../../GroupSelect'\nimport { GroupInput } from '../../../GroupInput'\n\ninterface PastProps {\n  item: FilterModel\n  onChange: (id: string, item: Partial<FilterModel>) => void\n  field: ILookmlModelExploreField\n}\n\nexport const Past = ({ item, onChange, field }: PastProps) => {\n  const { id, value, unit, complete } = item\n\n  const valueChange = (e: ChangeEvent<HTMLInputElement>) => {\n    const newValue = String(e.target.value).split(',').map(Number)\n    onChange(id, { value: newValue })\n  }\n\n  const unitChange = (value: string) => {\n    const option = options.find((option) => option.value === value)\n    onChange(item.id, { unit: option?.unit, complete: option?.complete })\n  }\n  const selectedUnit = complete ? `c_${unit}` : `${unit}`\n\n  const fiscalPastUnits = useFiscalPastUnits()\n  const pastUnits = usePastUnits()\n  const options = showFiscalUnits(field) ? fiscalPastUnits : pastUnits\n  // options have extra properties that will cause React warnings\n  const formattedOptions = useMemo(\n    () => options.map(({ label, value }) => ({ label, value })),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    []\n  )\n  return (\n    <>\n      <GroupInput onChange={valueChange} value={value} placement=\"middle\" />\n      <GroupSelect\n        value={selectedUnit}\n        options={formattedOptions}\n        onChange={unitChange}\n        placement=\"right\"\n      />\n    </>\n  )\n}\n"],"mappings":";;;;;;;AAOA;AACA;AACA;AACA;AACA;AAAgD;AAAA;;AAQzC,IAAMA,IAAI,GAAG,SAAPA,IAAI,OAA6C;EAAA,IAAvCC,IAAI,QAAJA,IAAI;IAAEC,QAAQ,QAARA,QAAQ;IAAEC,KAAK,QAALA,KAAK;EAC1C,IAAQC,EAAE,GAA4BH,IAAI,CAAlCG,EAAE;IAAEC,KAAK,GAAqBJ,IAAI,CAA9BI,KAAK;IAAEC,IAAI,GAAeL,IAAI,CAAvBK,IAAI;IAAEC,QAAQ,GAAKN,IAAI,CAAjBM,QAAQ;EAEjC,IAAMC,WAAW,GAAG,SAAdA,WAAW,CAAIC,CAAgC,EAAK;IACxD,IAAMC,QAAQ,GAAGC,MAAM,CAACF,CAAC,CAACG,MAAM,CAACP,KAAK,CAAC,CAACQ,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAACC,MAAM,CAAC;IAC9Db,QAAQ,CAACE,EAAE,EAAE;MAAEC,KAAK,EAAEK;IAAS,CAAC,CAAC;EACnC,CAAC;EAED,IAAMM,UAAU,GAAG,SAAbA,UAAU,CAAIX,KAAa,EAAK;IACpC,IAAMY,MAAM,GAAGC,OAAO,CAACC,IAAI,CAAC,UAACF,MAAM;MAAA,OAAKA,MAAM,CAACZ,KAAK,KAAKA,KAAK;IAAA,EAAC;IAC/DH,QAAQ,CAACD,IAAI,CAACG,EAAE,EAAE;MAAEE,IAAI,EAAEW,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEX,IAAI;MAAEC,QAAQ,EAAEU,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEV;IAAS,CAAC,CAAC;EACvE,CAAC;EACD,IAAMa,YAAY,GAAGb,QAAQ,eAAQD,IAAI,cAAQA,IAAI,CAAE;EAEvD,IAAMe,eAAe,GAAG,IAAAC,6BAAkB,GAAE;EAC5C,IAAMC,SAAS,GAAG,IAAAC,uBAAY,GAAE;EAChC,IAAMN,OAAO,GAAG,IAAAO,kCAAe,EAACtB,KAAK,CAAC,GAAGkB,eAAe,GAAGE,SAAS;EAEpE,IAAMG,gBAAgB,GAAG,IAAAC,cAAO,EAC9B;IAAA,OAAMT,OAAO,CAACJ,GAAG,CAAC;MAAA,IAAGc,KAAK,SAALA,KAAK;QAAEvB,KAAK,SAALA,KAAK;MAAA,OAAQ;QAAEuB,KAAK,EAALA,KAAK;QAAEvB,KAAK,EAALA;MAAM,CAAC;IAAA,CAAC,CAAC;EAAA;EAE3D,EAAE,CACH;EACD,OACE,kEACE,gCAAC,sBAAU;IAAC,QAAQ,EAAEG,WAAY;IAAC,KAAK,EAAEH,KAAM;IAAC,SAAS,EAAC;EAAQ,EAAG,EACtE,gCAAC,wBAAW;IACV,KAAK,EAAEe,YAAa;IACpB,OAAO,EAAEM,gBAAiB;IAC1B,QAAQ,EAAEV,UAAW;IACrB,SAAS,EAAC;EAAO,EACjB,CACD;AAEP,CAAC;AAAA"}