{"version":3,"file":"RelativeTimeframes.spec.js","names":["originalClientWidth","Object","getOwnPropertyDescriptor","HTMLElement","prototype","beforeEach","defineProperty","configurable","value","afterEach","describe","it","renderWithTheme","from","Date","to","jest","fn","trigger","screen","getByRole","fireEvent","click","expect","getByDisplayValue","toBeInTheDocument","document","getByText","waitForElementToBeRemoved","queryByText"],"sources":["../../../../../../../../../src/Filter/components/AdvancedFilter/components/DateFilter/components/RelativeTimeframes/RelativeTimeframes.spec.tsx"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\nimport {\n  screen,\n  fireEvent,\n  waitForElementToBeRemoved,\n} from '@testing-library/react'\nimport { renderWithTheme } from '@looker/components-test-utils'\nimport React from 'react'\nimport { RelativeTimeframes } from './RelativeTimeframes'\n\nconst originalClientWidth = Object.getOwnPropertyDescriptor(\n  HTMLElement.prototype,\n  'clientWidth'\n)\n\nbeforeEach(() => {\n  Object.defineProperty(HTMLElement.prototype, 'clientWidth', {\n    configurable: true,\n    value: 800,\n  })\n})\n\nafterEach(() => {\n  if (originalClientWidth) {\n    Object.defineProperty(\n      HTMLElement.prototype,\n      'clientWidth',\n      originalClientWidth\n    )\n  }\n})\n\ndescribe('RelativeTimeframes', () => {\n  it('should render RelativeTimeframes with custom timeframe', async () => {\n    renderWithTheme(\n      <RelativeTimeframes\n        value={{ from: new Date(2016, 2, 1), to: new Date(2016, 3, 1) }}\n        onChange={jest.fn()}\n      />\n    )\n    const trigger = screen.getByRole('button')\n    fireEvent.click(trigger)\n    expect(screen.getByDisplayValue('2016/04/01')).toBeInTheDocument()\n\n    // close popover\n    fireEvent.click(document)\n  })\n\n  it('should render RelativeTimeframes in a dialog on mobile', async () => {\n    Object.defineProperty(HTMLElement.prototype, 'clientWidth', {\n      configurable: true,\n      value: 400,\n    })\n\n    renderWithTheme(\n      <RelativeTimeframes\n        value={{ from: new Date(2016, 2, 1), to: new Date(2016, 3, 1) }}\n        onChange={jest.fn()}\n      />\n    )\n    fireEvent.click(screen.getByRole('button'))\n    expect(screen.getByText('Choose a Timeframe')).toBeInTheDocument()\n\n    // Close the Dialog\n    fireEvent.click(screen.getByText('Close'))\n    await waitForElementToBeRemoved(() =>\n      screen.queryByText('Choose a Timeframe')\n    )\n  })\n})\n"],"mappings":";;;;AAIA;AAKA;AACA;AACA;;AAEA,IAAMA,mBAAmB,GAAGC,MAAM,CAACC,wBAAwB,CACzDC,WAAW,CAACC,SAAS,EACrB,aAAa,CACd;AAEDC,UAAU,CAAC,YAAM;EACfJ,MAAM,CAACK,cAAc,CAACH,WAAW,CAACC,SAAS,EAAE,aAAa,EAAE;IAC1DG,YAAY,EAAE,IAAI;IAClBC,KAAK,EAAE;EACT,CAAC,CAAC;AACJ,CAAC,CAAC;AAEFC,SAAS,CAAC,YAAM;EACd,IAAIT,mBAAmB,EAAE;IACvBC,MAAM,CAACK,cAAc,CACnBH,WAAW,CAACC,SAAS,EACrB,aAAa,EACbJ,mBAAmB,CACpB;EACH;AACF,CAAC,CAAC;AAEFU,QAAQ,CAAC,oBAAoB,EAAE,YAAM;EACnCC,EAAE,CAAC,wDAAwD,6DAAE;IAAA;IAAA;MAAA;QAAA;UAC3D,IAAAC,oCAAe,EACb,iCAAC,sCAAkB;YACjB,KAAK,EAAE;cAAEC,IAAI,EAAE,IAAIC,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;cAAEC,EAAE,EAAE,IAAID,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC;YAAE,CAAE;YAChE,QAAQ,EAAEE,IAAI,CAACC,EAAE;UAAG,EACpB,CACH;UACKC,OAAO,GAAGC,aAAM,CAACC,SAAS,CAAC,QAAQ,CAAC;UAC1CC,gBAAS,CAACC,KAAK,CAACJ,OAAO,CAAC;UACxBK,MAAM,CAACJ,aAAM,CAACK,iBAAiB,CAAC,YAAY,CAAC,CAAC,CAACC,iBAAiB,EAAE;;UAGlEJ,gBAAS,CAACC,KAAK,CAACI,QAAQ,CAAC;QAAA;QAAA;UAAA;MAAA;IAAA;EAAA,CAC1B,GAAC;EAEFf,EAAE,CAAC,wDAAwD,6DAAE;IAAA;MAAA;QAAA;UAC3DV,MAAM,CAACK,cAAc,CAACH,WAAW,CAACC,SAAS,EAAE,aAAa,EAAE;YAC1DG,YAAY,EAAE,IAAI;YAClBC,KAAK,EAAE;UACT,CAAC,CAAC;UAEF,IAAAI,oCAAe,EACb,iCAAC,sCAAkB;YACjB,KAAK,EAAE;cAAEC,IAAI,EAAE,IAAIC,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;cAAEC,EAAE,EAAE,IAAID,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC;YAAE,CAAE;YAChE,QAAQ,EAAEE,IAAI,CAACC,EAAE;UAAG,EACpB,CACH;UACDI,gBAAS,CAACC,KAAK,CAACH,aAAM,CAACC,SAAS,CAAC,QAAQ,CAAC,CAAC;UAC3CG,MAAM,CAACJ,aAAM,CAACQ,SAAS,CAAC,oBAAoB,CAAC,CAAC,CAACF,iBAAiB,EAAE;;UAGlEJ,gBAAS,CAACC,KAAK,CAACH,aAAM,CAACQ,SAAS,CAAC,OAAO,CAAC,CAAC;UAAA;UAAA,OACpC,IAAAC,gCAAyB,EAAC;YAAA,OAC9BT,aAAM,CAACU,WAAW,CAAC,oBAAoB,CAAC;UAAA,EACzC;QAAA;QAAA;UAAA;MAAA;IAAA;EAAA,CACF,GAAC;AACJ,CAAC,CAAC"}