{"version":3,"file":"SingleNumberInput.spec.js","names":["describe","props","item","id","type","value","onChange","jest","fn","beforeEach","mockClear","it","renderWithTheme","input","screen","getByTestId","expect","toHaveAttribute","toHaveDisplayValue","fireEvent","change","target","toHaveBeenCalledWith","not","toHaveBeenCalled","mock","calls","toMatchInlineSnapshot"],"sources":["../../../../../../../../../src/Filter/components/AdvancedFilter/components/NumberFilter/components/SingleNumberInput/SingleNumberInput.spec.tsx"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\nimport { renderWithTheme } from '@looker/components-test-utils'\nimport type { FilterModel } from '@looker/filter-expressions'\nimport { screen, fireEvent } from '@testing-library/react'\nimport React from 'react'\nimport { SingleNumberInput } from './SingleNumberInput'\n\ndescribe('SingleNumberInput component', () => {\n  const props = {\n    item: { id: 'test_id', type: '=', value: [] } as unknown as FilterModel,\n    onChange: jest.fn(),\n  }\n  beforeEach(() => {\n    props.onChange.mockClear()\n  })\n\n  it('defaults to empty string', () => {\n    renderWithTheme(<SingleNumberInput {...props} />)\n    // Can't use getByRole('textbox') for type=\"number\"\n    const input = screen.getByTestId('single-number')\n    // type=\"number\" is important, it prevents non-numeric input\n    expect(input).toHaveAttribute('type', 'number')\n    expect(input).toHaveDisplayValue('')\n  })\n\n  it('shows the current itemValue', () => {\n    renderWithTheme(\n      <SingleNumberInput\n        {...props}\n        item={{ id: 'test_id', type: '=', value: 1 } as unknown as FilterModel}\n      />\n    )\n    // Can't use getByRole('textbox') for type=\"number\"\n    const input = screen.getByTestId('single-number')\n    // type=\"number\" is important, it prevents non-numeric input\n    expect(input).toHaveAttribute('type', 'number')\n    expect(input).toHaveDisplayValue('1')\n  })\n\n  it('shows the current itemValue if it is zero (0)', () => {\n    // bug fix for b/265746708\n    renderWithTheme(\n      <SingleNumberInput\n        {...props}\n        item={{ id: 'test_id', type: '=', value: 0 } as unknown as FilterModel}\n      />\n    )\n    const input = screen.getByTestId('single-number')\n    expect(input).toHaveDisplayValue('0')\n  })\n\n  describe('calls onChange handler', () => {\n    it('calls onChange handler for number value', () => {\n      renderWithTheme(<SingleNumberInput {...props} />)\n      const input = screen.getByTestId('single-number')\n      fireEvent.change(input, { target: { value: '2' } })\n      expect(props.onChange).toHaveBeenCalledWith('test_id', { value: [2] })\n    })\n\n    it('Does not call onChange handler for not numeric value', () => {\n      renderWithTheme(<SingleNumberInput {...props} />)\n      fireEvent.change(screen.getByTestId('single-number'), {\n        target: { value: 'not numeric value' },\n      })\n      expect(props.onChange).not.toHaveBeenCalled()\n    })\n\n    it('calls onChange handler for big integer', () => {\n      renderWithTheme(<SingleNumberInput {...props} />)\n      const input = screen.getByTestId('single-number')\n      fireEvent.change(input, { target: { value: '12345678901234567890' } })\n      expect(props.onChange.mock.calls).toMatchInlineSnapshot(`\n        Array [\n          Array [\n            \"test_id\",\n            Object {\n              \"value\": Array [\n                12345678901234567890n,\n              ],\n            },\n          ],\n        ]\n      `)\n    })\n  })\n})\n"],"mappings":"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"}