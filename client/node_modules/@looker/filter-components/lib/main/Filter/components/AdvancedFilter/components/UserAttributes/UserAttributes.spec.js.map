{"version":3,"file":"UserAttributes.spec.js","names":["describe","testUserAttributes","name","label","rank","value","user_id","user_can_edit","value_is_hidden","user_attribute_id","source","hidden_value_domain_whitelist","can","edit","testItem","id","type","is","attributeName","filterParamProps","item","userAttributes","onChange","jest","fn","it","renderWithTheme","expect","screen","getByRole","toHaveValue","props","selectInput","getByDisplayValue","fireEvent","click","attribute","getByText","toHaveBeenCalledWith","attributeValue"],"sources":["../../../../../../../src/Filter/components/AdvancedFilter/components/UserAttributes/UserAttributes.spec.tsx"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\nimport { renderWithTheme } from '@looker/components-test-utils'\nimport type { UserAttributeWithValue } from '@looker/filter-expressions'\nimport { fireEvent, screen } from '@testing-library/react'\nimport React from 'react'\nimport { UserAttributes } from './UserAttributes'\n\ndescribe('User Attribute', () => {\n  const testUserAttributes = {\n    name: 'testAttributeName',\n    label: 'label',\n    rank: 1,\n    value: 'value',\n    user_id: '2',\n    user_can_edit: true,\n    value_is_hidden: false,\n    user_attribute_id: '3',\n    source: 'source',\n    hidden_value_domain_whitelist: 'hidden value domain whitelist',\n    can: { edit: true },\n  } as UserAttributeWithValue\n\n  const testItem = {\n    id: '4',\n    type: 'anywhere',\n    is: true,\n    attributeName: 'testAttributeName',\n  }\n  const filterParamProps = () =>\n    ({\n      item: testItem,\n      userAttributes: [\n        testUserAttributes,\n        { name: 'testAttributeName2', value: 'value2', label: 'label2' },\n      ],\n      onChange: jest.fn(),\n    } as any)\n\n  it('should render a User Attribute', () => {\n    renderWithTheme(<UserAttributes {...filterParamProps()} />)\n    expect(screen.getByRole('textbox')).toHaveValue('label (value)')\n  })\n\n  it('should call userAttributeChange on change', () => {\n    const props = filterParamProps()\n    renderWithTheme(<UserAttributes {...props} />)\n\n    const selectInput = screen.getByDisplayValue('label (value)')\n    fireEvent.click(selectInput)\n\n    const attribute = screen.getByText('label2 (value2)')\n    fireEvent.click(attribute)\n\n    expect(props.onChange).toHaveBeenCalledWith('4', {\n      attributeName: 'testAttributeName2',\n      attributeValue: 'value2',\n    })\n  })\n})\n"],"mappings":";;;AAIA;AAEA;AACA;AACA;;AAEAA,QAAQ,CAAC,gBAAgB,EAAE,YAAM;EAC/B,IAAMC,kBAAkB,GAAG;IACzBC,IAAI,EAAE,mBAAmB;IACzBC,KAAK,EAAE,OAAO;IACdC,IAAI,EAAE,CAAC;IACPC,KAAK,EAAE,OAAO;IACdC,OAAO,EAAE,GAAG;IACZC,aAAa,EAAE,IAAI;IACnBC,eAAe,EAAE,KAAK;IACtBC,iBAAiB,EAAE,GAAG;IACtBC,MAAM,EAAE,QAAQ;IAChBC,6BAA6B,EAAE,+BAA+B;IAC9DC,GAAG,EAAE;MAAEC,IAAI,EAAE;IAAK;EACpB,CAA2B;EAE3B,IAAMC,QAAQ,GAAG;IACfC,EAAE,EAAE,GAAG;IACPC,IAAI,EAAE,UAAU;IAChBC,EAAE,EAAE,IAAI;IACRC,aAAa,EAAE;EACjB,CAAC;EACD,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAgB;IAAA,OACnB;MACCC,IAAI,EAAEN,QAAQ;MACdO,cAAc,EAAE,CACdpB,kBAAkB,EAClB;QAAEC,IAAI,EAAE,oBAAoB;QAAEG,KAAK,EAAE,QAAQ;QAAEF,KAAK,EAAE;MAAS,CAAC,CACjE;MACDmB,QAAQ,EAAEC,IAAI,CAACC,EAAE;IACnB,CAAC;EAAA,CAAQ;EAEXC,EAAE,CAAC,gCAAgC,EAAE,YAAM;IACzC,IAAAC,oCAAe,EAAC,iCAAC,8BAAc,EAAKP,gBAAgB,EAAE,CAAI,CAAC;IAC3DQ,MAAM,CAACC,aAAM,CAACC,SAAS,CAAC,SAAS,CAAC,CAAC,CAACC,WAAW,CAAC,eAAe,CAAC;EAClE,CAAC,CAAC;EAEFL,EAAE,CAAC,2CAA2C,EAAE,YAAM;IACpD,IAAMM,KAAK,GAAGZ,gBAAgB,EAAE;IAChC,IAAAO,oCAAe,EAAC,iCAAC,8BAAc,EAAKK,KAAK,CAAI,CAAC;IAE9C,IAAMC,WAAW,GAAGJ,aAAM,CAACK,iBAAiB,CAAC,eAAe,CAAC;IAC7DC,gBAAS,CAACC,KAAK,CAACH,WAAW,CAAC;IAE5B,IAAMI,SAAS,GAAGR,aAAM,CAACS,SAAS,CAAC,iBAAiB,CAAC;IACrDH,gBAAS,CAACC,KAAK,CAACC,SAAS,CAAC;IAE1BT,MAAM,CAACI,KAAK,CAACT,QAAQ,CAAC,CAACgB,oBAAoB,CAAC,GAAG,EAAE;MAC/CpB,aAAa,EAAE,oBAAoB;MACnCqB,cAAc,EAAE;IAClB,CAAC,CAAC;EACJ,CAAC,CAAC;AACJ,CAAC,CAAC"}