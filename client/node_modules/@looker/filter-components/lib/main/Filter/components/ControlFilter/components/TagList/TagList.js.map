{"version":3,"file":"TagList.js","names":["TagListComponent","value","options","onChange","onInputChange","validationMessage","props","useOptionFiltering","filteredOptions","noOptionsLabel","onFilter","handleChange","newValues","placeholderProps","usePlaceholder","resizeHappened","useRef","useEffect","length","current","window","dispatchEvent","Event","maxWidth","width","type","TagList","styled","InputText","tokenStylePlaceholder"],"sources":["../../../../../../../src/Filter/components/ControlFilter/components/TagList/TagList.tsx"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\nimport { InputText, SelectMulti } from '@looker/components'\nimport React, { useEffect, useRef } from 'react'\nimport styled from 'styled-components'\nimport type { StringMultiSelectProps } from '../../../../types/string_select_props'\nimport type { TokenStyleProps } from '../../../../utils/filter_styles'\nimport { tokenStylePlaceholder } from '../../../../utils/filter_styles'\nimport { useOptionFiltering } from '../../../../utils/use_option_filtering'\nimport { usePlaceholder } from '../../../../utils/use_placeholder'\n\nexport type TagListProps = StringMultiSelectProps & TokenStyleProps\n\nconst TagListComponent = ({\n  value,\n  options,\n  onChange,\n  onInputChange,\n  validationMessage,\n  ...props\n}: TagListProps) => {\n  const { filteredOptions, noOptionsLabel, onFilter } = useOptionFiltering({\n    value,\n    options,\n    onInputChange,\n  })\n\n  const handleChange = (newValues?: string[]) => {\n    onChange(newValues || [])\n  }\n\n  const placeholderProps = usePlaceholder(value, validationMessage)\n\n  // TODO(benshope) remove this hack when the components people\n  // fix the height on the infinite scroll component\n  const resizeHappened = useRef<boolean>()\n  useEffect(() => {\n    if (options.length && !resizeHappened.current) {\n      window.dispatchEvent(new Event('resize'))\n      resizeHappened.current = true\n    }\n  }, [options.length])\n\n  return (\n    <SelectMulti\n      {...props}\n      {...placeholderProps}\n      removeOnBackspace={false}\n      values={value}\n      onChange={handleChange}\n      isFilterable\n      onFilter={onFilter}\n      options={filteredOptions}\n      noOptionsLabel={noOptionsLabel}\n      width={410}\n      maxWidth=\"100%\"\n      maxHeight={145}\n      listLayout={{\n        maxWidth: ['95vw', '90vw', '80vw', '65vw', '50vw'],\n        width: 'auto',\n      }}\n      noErrorIcon\n      validationType={validationMessage?.type}\n    />\n  )\n}\n\nexport const TagList = styled(TagListComponent)`\n  ${InputText} {\n    ${tokenStylePlaceholder}\n  }\n`\n"],"mappings":";;;;;;;;;;;AAIA;AACA;AACA;AAGA;AACA;AACA;AAAkE;AAAA;AAAA;AAAA;AAIlE,IAAMA,gBAAgB,GAAG,SAAnBA,gBAAgB,OAOF;EAAA,IANlBC,KAAK,QAALA,KAAK;IACLC,OAAO,QAAPA,OAAO;IACPC,QAAQ,QAARA,QAAQ;IACRC,aAAa,QAAbA,aAAa;IACbC,iBAAiB,QAAjBA,iBAAiB;IACdC,KAAK;EAER,0BAAsD,IAAAC,wCAAkB,EAAC;MACvEN,KAAK,EAALA,KAAK;MACLC,OAAO,EAAPA,OAAO;MACPE,aAAa,EAAbA;IACF,CAAC,CAAC;IAJMI,eAAe,uBAAfA,eAAe;IAAEC,cAAc,uBAAdA,cAAc;IAAEC,QAAQ,uBAARA,QAAQ;EAMjD,IAAMC,YAAY,GAAG,SAAfA,YAAY,CAAIC,SAAoB,EAAK;IAC7CT,QAAQ,CAACS,SAAS,IAAI,EAAE,CAAC;EAC3B,CAAC;EAED,IAAMC,gBAAgB,GAAG,IAAAC,+BAAc,EAACb,KAAK,EAAEI,iBAAiB,CAAC;;EAIjE,IAAMU,cAAc,GAAG,IAAAC,aAAM,GAAW;EACxC,IAAAC,gBAAS,EAAC,YAAM;IACd,IAAIf,OAAO,CAACgB,MAAM,IAAI,CAACH,cAAc,CAACI,OAAO,EAAE;MAC7CC,MAAM,CAACC,aAAa,CAAC,IAAIC,KAAK,CAAC,QAAQ,CAAC,CAAC;MACzCP,cAAc,CAACI,OAAO,GAAG,IAAI;IAC/B;EACF,CAAC,EAAE,CAACjB,OAAO,CAACgB,MAAM,CAAC,CAAC;EAEpB,OACE,gCAAC,uBAAW,gCACNZ,KAAK,EACLO,gBAAgB;IACpB,iBAAiB,EAAE,KAAM;IACzB,MAAM,EAAEZ,KAAM;IACd,QAAQ,EAAEU,YAAa;IACvB,YAAY;IACZ,QAAQ,EAAED,QAAS;IACnB,OAAO,EAAEF,eAAgB;IACzB,cAAc,EAAEC,cAAe;IAC/B,KAAK,EAAE,GAAI;IACX,QAAQ,EAAC,MAAM;IACf,SAAS,EAAE,GAAI;IACf,UAAU,EAAE;MACVc,QAAQ,EAAE,CAAC,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,CAAC;MAClDC,KAAK,EAAE;IACT,CAAE;IACF,WAAW;IACX,cAAc,EAAEnB,iBAAiB,aAAjBA,iBAAiB,uBAAjBA,iBAAiB,CAAEoB;EAAK,GACxC;AAEN,CAAC;AAEM,IAAMC,OAAO,GAAG,IAAAC,4BAAM,EAAC3B,gBAAgB,CAAC;EAAA;EAAA;AAAA,oHAC3C4B,qBAAS,EACPC,oCAAqB,CAE1B;AAAA"}