{"version":3,"file":"use_filter_config.js","names":["getSkipFallback","skipFilterConfigCheck","props","canRenderFilter","useFilterConfig","useState","skipFallback","setSkipFallback","skipFallbackConfigCheckRef","useRef","current","uiConfig","config","getFallbackFilterConfig"],"sources":["../../../../src/Filter/utils/use_filter_config.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\nimport { useState, useRef } from 'react'\nimport type { FilterUIConfig } from '../types/filter_ui_config'\nimport type { RenderFilterProps } from '.'\nimport { getFallbackFilterConfig, canRenderFilter } from '.'\n\ninterface useFallbackReturnValue {\n  skipFilterConfigCheck: boolean\n  uiConfig: FilterUIConfig\n}\n\nconst getSkipFallback = ({\n  skipFilterConfigCheck,\n  ...props\n}: RenderFilterProps) => skipFilterConfigCheck ?? canRenderFilter(props)\n\n/**\n * This hook checks the filter control can render\n * the filter expression, otherwise it updates the config\n * to render an advanced filter\n * @param RenderFilterProps\n * @returns useFallbackReturnValue\n */\nexport const useFilterConfig = (\n  props: RenderFilterProps\n): useFallbackReturnValue => {\n  // store the skipFallback value for the rest of\n  // the component lifecycle\n  const [skipFallback, setSkipFallback] = useState(getSkipFallback(props))\n\n  const skipFallbackConfigCheckRef = useRef(props.skipFilterConfigCheck)\n\n  // check if skipFilterConfigCheck has been reset from EditMode\n  if (props.skipFilterConfigCheck !== skipFallbackConfigCheckRef.current) {\n    skipFallbackConfigCheckRef.current = props.skipFilterConfigCheck\n    setSkipFallback(getSkipFallback(props))\n  }\n\n  // if filter can be rendered for uiConfig\n  const uiConfig = (\n    skipFallback\n      ? // use existing config\n        props.config || {}\n      : // fallback to using an advanced filter\n        getFallbackFilterConfig(props.config)\n  ) as FilterUIConfig\n  return {\n    skipFilterConfigCheck: skipFallback,\n    uiConfig,\n  }\n}\n"],"mappings":";;;;;;;;;AAIA;AAGA;AAA4D;AAO5D,IAAMA,eAAe,GAAG,SAAlBA,eAAe;EAAA,IACnBC,qBAAqB,QAArBA,qBAAqB;IAClBC,KAAK;EAAA,OACeD,qBAAqB,aAArBA,qBAAqB,cAArBA,qBAAqB,GAAI,IAAAE,iBAAe,EAACD,KAAK,CAAC;AAAA;;AASjE,IAAME,eAAe,GAAG,SAAlBA,eAAe,CAC1BF,KAAwB,EACG;EAG3B,gBAAwC,IAAAG,eAAQ,EAACL,eAAe,CAACE,KAAK,CAAC,CAAC;IAAA;IAAjEI,YAAY;IAAEC,eAAe;EAEpC,IAAMC,0BAA0B,GAAG,IAAAC,aAAM,EAACP,KAAK,CAACD,qBAAqB,CAAC;;EAGtE,IAAIC,KAAK,CAACD,qBAAqB,KAAKO,0BAA0B,CAACE,OAAO,EAAE;IACtEF,0BAA0B,CAACE,OAAO,GAAGR,KAAK,CAACD,qBAAqB;IAChEM,eAAe,CAACP,eAAe,CAACE,KAAK,CAAC,CAAC;EACzC;;EAGA,IAAMS,QAAQ,GACZL,YAAY;EAERJ,KAAK,CAACU,MAAM,IAAI,CAAC,CAAC;EAElB,IAAAC,yBAAuB,EAACX,KAAK,CAACU,MAAM,CACvB;EACnB,OAAO;IACLX,qBAAqB,EAAEK,YAAY;IACnCK,QAAQ,EAARA;EACF,CAAC;AACH,CAAC;AAAA"}