{"version":3,"file":"TreeSelect.spec.js","names":["test","onSelectedFieldChangeMock","jest","fn","renderWithTheme","orders","screen","getByText","expect","toBeVisible","fireEvent","click","createdDate","input","getByRole","change","target","value","queryByText","not","toBeInTheDocument","zip","toHaveStyle","textDecoration","mock","calls","toMatchObject","field"],"sources":["../../../src/TreeSelect/TreeSelect.spec.tsx"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport React from 'react'\nimport { screen, fireEvent } from '@testing-library/react'\nimport { renderWithTheme } from '@looker/components-test-utils'\nimport WithoutDropdown from './stories/WithoutDropdown'\nimport Basic from './stories/Basic'\n\ntest('without dropdown', () => {\n  const onSelectedFieldChangeMock = jest.fn()\n  renderWithTheme(\n    <WithoutDropdown\n      searchInputValue=\"\"\n      onSelectedFieldChange={onSelectedFieldChangeMock}\n    />\n  )\n  const orders = screen.getByText('Orders')\n  expect(orders).toBeVisible()\n  expect(screen.getByText('Users')).toBeVisible()\n\n  // Open 1st level\n  fireEvent.click(orders)\n  const createdDate = screen.getByText('Created Date')\n  expect(createdDate).toBeVisible()\n\n  // Open 2nd level\n  fireEvent.click(createdDate)\n  expect(screen.getByText('Created Month')).toBeVisible()\n\n  const input = screen.getByRole('textbox')\n  fireEvent.change(input, { target: { value: 'zip' } })\n\n  // Orders filtered out but Users is showing\n  expect(screen.queryByText('Orders')).not.toBeInTheDocument()\n  expect(screen.getByText('Users')).toBeVisible()\n  const zip = screen.getByText('Zip')\n  expect(zip).toBeVisible()\n  // Zip is highlighted\n  expect(zip).toHaveStyle({ textDecoration: 'underline' })\n  fireEvent.click(zip)\n  expect(onSelectedFieldChangeMock.mock.calls[0][0]).toMatchObject({\n    field: 'users.zip',\n  })\n})\n\ntest('with dropdown', () => {\n  const onSelectedFieldChangeMock = jest.fn()\n  renderWithTheme(\n    <Basic\n      searchInputValue=\"\"\n      onSelectedFieldChange={onSelectedFieldChangeMock}\n    />\n  )\n  // Tree doesn't show until search input is clicked\n  expect(screen.queryByText('Orders')).not.toBeInTheDocument()\n  const input = screen.getByRole('textbox')\n  fireEvent.click(input)\n\n  // Drill down\n  fireEvent.click(screen.getByText('Orders'))\n  fireEvent.click(screen.getByText('Created Date'))\n  expect(screen.getByText('Created Month')).toBeVisible()\n\n  fireEvent.change(input, { target: { value: 'zip' } })\n  fireEvent.click(screen.getByText('Zip'))\n  expect(onSelectedFieldChangeMock.mock.calls[0][0]).toMatchObject({\n    field: 'users.zip',\n  })\n})\n\ntest('no matching fields', () => {\n  const onSelectedFieldChangeMock = jest.fn()\n  renderWithTheme(\n    <WithoutDropdown\n      searchInputValue=\"\"\n      onSelectedFieldChange={onSelectedFieldChangeMock}\n    />\n  )\n  const input = screen.getByRole('textbox')\n  fireEvent.change(input, { target: { value: 'foo' } })\n  expect(screen.getByText('No matching fields')).toBeVisible()\n})\n"],"mappings":"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"}