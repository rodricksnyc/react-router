{"version":3,"file":"DashboardFilter.js","names":["React","useContext","useEffect","Field","Status","Tooltip","Filter","useValidationMessage","useSuggestable","useExpressionState","FilterContext","DashboardFilter","filter","sdk","rest","id","name","type","field","required","ui_config","allow_multiple_values","removeFilter","stateProps","errorMessage","suggestableProps","validationMessage","expression"],"sources":["../../../src/DashboardFilter/DashboardFilter.tsx"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\nimport React, { useContext, useEffect } from 'react'\nimport { Field, Status, Tooltip } from '@looker/components'\nimport { Filter } from '../Filter/Filter'\nimport { useValidationMessage } from '../Filter/utils'\nimport type { UseSuggestableProps } from './use_suggestable'\nimport { useSuggestable } from './use_suggestable'\nimport type { UseExpressionStateProps } from './use_expression_state'\nimport { useExpressionState } from './use_expression_state'\nimport { FilterContext } from '../FilterCollection'\n\nexport type DashboardFilterProps = UseExpressionStateProps & UseSuggestableProps\n\n/**\n * Renders a dashboard filter, including label and validation, and fetches suggestions\n * if necessary. For rendering just the filter input control on its own, see `Filter`.\n */\nexport const DashboardFilter = ({\n  filter,\n  sdk,\n  ...rest\n}: DashboardFilterProps) => {\n  const { id, name, type, field, required, ui_config, allow_multiple_values } =\n    filter\n\n  const { removeFilter } = useContext(FilterContext)\n\n  useEffect(() => {\n    return () => {\n      removeFilter(filter)\n    }\n  }, [removeFilter, filter])\n\n  const stateProps = useExpressionState({ filter, ...rest })\n\n  const { errorMessage, suggestableProps } = useSuggestable({\n    filter,\n    sdk,\n  })\n\n  const validationMessage = useValidationMessage(\n    stateProps.expression,\n    required\n  )\n\n  return (\n    <Field\n      id={id || ''}\n      label={name || ''}\n      detail={\n        errorMessage && (\n          <Tooltip content={errorMessage}>\n            <Status intent=\"critical\" data-testid=\"error-icon\" />\n          </Tooltip>\n        )\n      }\n      validationMessage={validationMessage}\n    >\n      <Filter\n        name={name || ''}\n        type={type || ''}\n        field={field}\n        config={ui_config}\n        isRequired={required}\n        {...suggestableProps}\n        {...stateProps}\n        allowMultipleValues={!!allow_multiple_values}\n      />\n    </Field>\n  )\n}\n"],"mappings":";;;;;;AAIA,OAAOA,KAAK,IAAIC,UAAU,EAAEC,SAAS,QAAQ,OAAO;AACpD,SAASC,KAAK,EAAEC,MAAM,EAAEC,OAAO,QAAQ,oBAAoB;AAC3D,SAASC,MAAM,QAAQ,kBAAkB;AACzC,SAASC,oBAAoB,QAAQ,iBAAiB;AAEtD,SAASC,cAAc,QAAQ,mBAAmB;AAElD,SAASC,kBAAkB,QAAQ,wBAAwB;AAC3D,SAASC,aAAa,QAAQ,qBAAqB;AAQnD,OAAO,MAAMC,eAAe,GAAG,QAIH;EAAA,IAJI;MAC9BC,MAAM;MACNC;IAEoB,CAAC;IADlBC,IAAI;EAEP,MAAM;IAAEC,EAAE;IAAEC,IAAI;IAAEC,IAAI;IAAEC,KAAK;IAAEC,QAAQ;IAAEC,SAAS;IAAEC;EAAsB,CAAC,GACzET,MAAM;EAER,MAAM;IAAEU;EAAa,CAAC,GAAGrB,UAAU,CAACS,aAAa,CAAC;EAElDR,SAAS,CAAC,MAAM;IACd,OAAO,MAAM;MACXoB,YAAY,CAACV,MAAM,CAAC;IACtB,CAAC;EACH,CAAC,EAAE,CAACU,YAAY,EAAEV,MAAM,CAAC,CAAC;EAE1B,MAAMW,UAAU,GAAGd,kBAAkB;IAAGG;EAAM,GAAKE,IAAI,EAAG;EAE1D,MAAM;IAAEU,YAAY;IAAEC;EAAiB,CAAC,GAAGjB,cAAc,CAAC;IACxDI,MAAM;IACNC;EACF,CAAC,CAAC;EAEF,MAAMa,iBAAiB,GAAGnB,oBAAoB,CAC5CgB,UAAU,CAACI,UAAU,EACrBR,QAAQ,CACT;EAED,OACE,oBAAC,KAAK;IACJ,EAAE,EAAEJ,EAAE,IAAI,EAAG;IACb,KAAK,EAAEC,IAAI,IAAI,EAAG;IAClB,MAAM,EACJQ,YAAY,IACV,oBAAC,OAAO;MAAC,OAAO,EAAEA;IAAa,GAC7B,oBAAC,MAAM;MAAC,MAAM,EAAC,UAAU;MAAC,eAAY;IAAY,EAAG,CAG1D;IACD,iBAAiB,EAAEE;EAAkB,GAErC,oBAAC,MAAM;IACL,IAAI,EAAEV,IAAI,IAAI,EAAG;IACjB,IAAI,EAAEC,IAAI,IAAI,EAAG;IACjB,KAAK,EAAEC,KAAM;IACb,MAAM,EAAEE,SAAU;IAClB,UAAU,EAAED;EAAS,GACjBM,gBAAgB,EAChBF,UAAU;IACd,mBAAmB,EAAE,CAAC,CAACF;EAAsB,GAC7C,CACI;AAEZ,CAAC"}