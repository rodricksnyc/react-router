{"version":3,"file":"TagList.js","names":["InputText","SelectMulti","React","useEffect","useRef","styled","tokenStylePlaceholder","useOptionFiltering","usePlaceholder","TagListComponent","value","options","onChange","onInputChange","validationMessage","props","filteredOptions","noOptionsLabel","onFilter","handleChange","newValues","placeholderProps","resizeHappened","length","current","window","dispatchEvent","Event","maxWidth","width","type","TagList"],"sources":["../../../../../../../src/Filter/components/ControlFilter/components/TagList/TagList.tsx"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\nimport { InputText, SelectMulti } from '@looker/components'\nimport React, { useEffect, useRef } from 'react'\nimport styled from 'styled-components'\nimport type { StringMultiSelectProps } from '../../../../types/string_select_props'\nimport type { TokenStyleProps } from '../../../../utils/filter_styles'\nimport { tokenStylePlaceholder } from '../../../../utils/filter_styles'\nimport { useOptionFiltering } from '../../../../utils/use_option_filtering'\nimport { usePlaceholder } from '../../../../utils/use_placeholder'\n\nexport type TagListProps = StringMultiSelectProps & TokenStyleProps\n\nconst TagListComponent = ({\n  value,\n  options,\n  onChange,\n  onInputChange,\n  validationMessage,\n  ...props\n}: TagListProps) => {\n  const { filteredOptions, noOptionsLabel, onFilter } = useOptionFiltering({\n    value,\n    options,\n    onInputChange,\n  })\n\n  const handleChange = (newValues?: string[]) => {\n    onChange(newValues || [])\n  }\n\n  const placeholderProps = usePlaceholder(value, validationMessage)\n\n  // TODO(benshope) remove this hack when the components people\n  // fix the height on the infinite scroll component\n  const resizeHappened = useRef<boolean>()\n  useEffect(() => {\n    if (options.length && !resizeHappened.current) {\n      window.dispatchEvent(new Event('resize'))\n      resizeHappened.current = true\n    }\n  }, [options.length])\n\n  return (\n    <SelectMulti\n      {...props}\n      {...placeholderProps}\n      removeOnBackspace={false}\n      values={value}\n      onChange={handleChange}\n      isFilterable\n      onFilter={onFilter}\n      options={filteredOptions}\n      noOptionsLabel={noOptionsLabel}\n      width={410}\n      maxWidth=\"100%\"\n      maxHeight={145}\n      listLayout={{\n        maxWidth: ['95vw', '90vw', '80vw', '65vw', '50vw'],\n        width: 'auto',\n      }}\n      noErrorIcon\n      validationType={validationMessage?.type}\n    />\n  )\n}\n\nexport const TagList = styled(TagListComponent)`\n  ${InputText} {\n    ${tokenStylePlaceholder}\n  }\n`\n"],"mappings":";;;;;AAIA,SAASA,SAAS,EAAEC,WAAW,QAAQ,oBAAoB;AAC3D,OAAOC,KAAK,IAAIC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAChD,OAAOC,MAAM,MAAM,mBAAmB;AAGtC,SAASC,qBAAqB,QAAQ,iCAAiC;AACvE,SAASC,kBAAkB,QAAQ,wCAAwC;AAC3E,SAASC,cAAc,QAAQ,mCAAmC;AAIlE,MAAMC,gBAAgB,GAAG,QAOL;EAAA,IAPM;MACxBC,KAAK;MACLC,OAAO;MACPC,QAAQ;MACRC,aAAa;MACbC;IAEY,CAAC;IADVC,KAAK;EAER,MAAM;IAAEC,eAAe;IAAEC,cAAc;IAAEC;EAAS,CAAC,GAAGX,kBAAkB,CAAC;IACvEG,KAAK;IACLC,OAAO;IACPE;EACF,CAAC,CAAC;EAEF,MAAMM,YAAY,GAAIC,SAAoB,IAAK;IAC7CR,QAAQ,CAACQ,SAAS,IAAI,EAAE,CAAC;EAC3B,CAAC;EAED,MAAMC,gBAAgB,GAAGb,cAAc,CAACE,KAAK,EAAEI,iBAAiB,CAAC;;EAIjE,MAAMQ,cAAc,GAAGlB,MAAM,EAAW;EACxCD,SAAS,CAAC,MAAM;IACd,IAAIQ,OAAO,CAACY,MAAM,IAAI,CAACD,cAAc,CAACE,OAAO,EAAE;MAC7CC,MAAM,CAACC,aAAa,CAAC,IAAIC,KAAK,CAAC,QAAQ,CAAC,CAAC;MACzCL,cAAc,CAACE,OAAO,GAAG,IAAI;IAC/B;EACF,CAAC,EAAE,CAACb,OAAO,CAACY,MAAM,CAAC,CAAC;EAEpB,OACE,oBAAC,WAAW,eACNR,KAAK,EACLM,gBAAgB;IACpB,iBAAiB,EAAE,KAAM;IACzB,MAAM,EAAEX,KAAM;IACd,QAAQ,EAAES,YAAa;IACvB,YAAY;IACZ,QAAQ,EAAED,QAAS;IACnB,OAAO,EAAEF,eAAgB;IACzB,cAAc,EAAEC,cAAe;IAC/B,KAAK,EAAE,GAAI;IACX,QAAQ,EAAC,MAAM;IACf,SAAS,EAAE,GAAI;IACf,UAAU,EAAE;MACVW,QAAQ,EAAE,CAAC,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,CAAC;MAClDC,KAAK,EAAE;IACT,CAAE;IACF,WAAW;IACX,cAAc,EAAEf,iBAAiB,aAAjBA,iBAAiB,uBAAjBA,iBAAiB,CAAEgB;EAAK,GACxC;AAEN,CAAC;AAED,OAAO,MAAMC,OAAO,GAAG1B,MAAM,CAACI,gBAAgB,CAAC;EAAA;EAAA;AAAA,gBAAC;AAChD,IAAE,CAAY;AACd,MAAI,CAAwB;AAC5B;AACA,IAHIT,SAAS,EACPM,qBAAqB,CAE1B"}