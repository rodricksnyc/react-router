{"version":3,"file":"use_filter_config.js","names":["useState","useRef","getFallbackFilterConfig","canRenderFilter","getSkipFallback","skipFilterConfigCheck","props","useFilterConfig","skipFallback","setSkipFallback","skipFallbackConfigCheckRef","current","uiConfig","config"],"sources":["../../../../src/Filter/utils/use_filter_config.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\nimport { useState, useRef } from 'react'\nimport type { FilterUIConfig } from '../types/filter_ui_config'\nimport type { RenderFilterProps } from '.'\nimport { getFallbackFilterConfig, canRenderFilter } from '.'\n\ninterface useFallbackReturnValue {\n  skipFilterConfigCheck: boolean\n  uiConfig: FilterUIConfig\n}\n\nconst getSkipFallback = ({\n  skipFilterConfigCheck,\n  ...props\n}: RenderFilterProps) => skipFilterConfigCheck ?? canRenderFilter(props)\n\n/**\n * This hook checks the filter control can render\n * the filter expression, otherwise it updates the config\n * to render an advanced filter\n * @param RenderFilterProps\n * @returns useFallbackReturnValue\n */\nexport const useFilterConfig = (\n  props: RenderFilterProps\n): useFallbackReturnValue => {\n  // store the skipFallback value for the rest of\n  // the component lifecycle\n  const [skipFallback, setSkipFallback] = useState(getSkipFallback(props))\n\n  const skipFallbackConfigCheckRef = useRef(props.skipFilterConfigCheck)\n\n  // check if skipFilterConfigCheck has been reset from EditMode\n  if (props.skipFilterConfigCheck !== skipFallbackConfigCheckRef.current) {\n    skipFallbackConfigCheckRef.current = props.skipFilterConfigCheck\n    setSkipFallback(getSkipFallback(props))\n  }\n\n  // if filter can be rendered for uiConfig\n  const uiConfig = (\n    skipFallback\n      ? // use existing config\n        props.config || {}\n      : // fallback to using an advanced filter\n        getFallbackFilterConfig(props.config)\n  ) as FilterUIConfig\n  return {\n    skipFilterConfigCheck: skipFallback,\n    uiConfig,\n  }\n}\n"],"mappings":";;AAIA,SAASA,QAAQ,EAAEC,MAAM,QAAQ,OAAO;AAGxC,SAASC,uBAAuB,EAAEC,eAAe,QAAQ,GAAG;AAO5D,MAAMC,eAAe,GAAG;EAAA,IAAC;MACvBC;IAEiB,CAAC;IADfC,KAAK;EAAA,OACeD,qBAAqB,aAArBA,qBAAqB,cAArBA,qBAAqB,GAAIF,eAAe,CAACG,KAAK,CAAC;AAAA;;AASxE,OAAO,MAAMC,eAAe,GAC1BD,KAAwB,IACG;EAG3B,MAAM,CAACE,YAAY,EAAEC,eAAe,CAAC,GAAGT,QAAQ,CAACI,eAAe,CAACE,KAAK,CAAC,CAAC;EAExE,MAAMI,0BAA0B,GAAGT,MAAM,CAACK,KAAK,CAACD,qBAAqB,CAAC;;EAGtE,IAAIC,KAAK,CAACD,qBAAqB,KAAKK,0BAA0B,CAACC,OAAO,EAAE;IACtED,0BAA0B,CAACC,OAAO,GAAGL,KAAK,CAACD,qBAAqB;IAChEI,eAAe,CAACL,eAAe,CAACE,KAAK,CAAC,CAAC;EACzC;;EAGA,MAAMM,QAAQ,GACZJ,YAAY;EAERF,KAAK,CAACO,MAAM,IAAI,CAAC,CAAC;EAElBX,uBAAuB,CAACI,KAAK,CAACO,MAAM,CACvB;EACnB,OAAO;IACLR,qBAAqB,EAAEG,YAAY;IACnCI;EACF,CAAC;AACH,CAAC"}