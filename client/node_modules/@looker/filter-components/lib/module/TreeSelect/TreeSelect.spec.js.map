{"version":3,"file":"TreeSelect.spec.js","names":["React","screen","fireEvent","renderWithTheme","WithoutDropdown","Basic","test","onSelectedFieldChangeMock","jest","fn","orders","getByText","expect","toBeVisible","click","createdDate","input","getByRole","change","target","value","queryByText","not","toBeInTheDocument","zip","toHaveStyle","textDecoration","mock","calls","toMatchObject","field"],"sources":["../../../src/TreeSelect/TreeSelect.spec.tsx"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport React from 'react'\nimport { screen, fireEvent } from '@testing-library/react'\nimport { renderWithTheme } from '@looker/components-test-utils'\nimport WithoutDropdown from './stories/WithoutDropdown'\nimport Basic from './stories/Basic'\n\ntest('without dropdown', () => {\n  const onSelectedFieldChangeMock = jest.fn()\n  renderWithTheme(\n    <WithoutDropdown\n      searchInputValue=\"\"\n      onSelectedFieldChange={onSelectedFieldChangeMock}\n    />\n  )\n  const orders = screen.getByText('Orders')\n  expect(orders).toBeVisible()\n  expect(screen.getByText('Users')).toBeVisible()\n\n  // Open 1st level\n  fireEvent.click(orders)\n  const createdDate = screen.getByText('Created Date')\n  expect(createdDate).toBeVisible()\n\n  // Open 2nd level\n  fireEvent.click(createdDate)\n  expect(screen.getByText('Created Month')).toBeVisible()\n\n  const input = screen.getByRole('textbox')\n  fireEvent.change(input, { target: { value: 'zip' } })\n\n  // Orders filtered out but Users is showing\n  expect(screen.queryByText('Orders')).not.toBeInTheDocument()\n  expect(screen.getByText('Users')).toBeVisible()\n  const zip = screen.getByText('Zip')\n  expect(zip).toBeVisible()\n  // Zip is highlighted\n  expect(zip).toHaveStyle({ textDecoration: 'underline' })\n  fireEvent.click(zip)\n  expect(onSelectedFieldChangeMock.mock.calls[0][0]).toMatchObject({\n    field: 'users.zip',\n  })\n})\n\ntest('with dropdown', () => {\n  const onSelectedFieldChangeMock = jest.fn()\n  renderWithTheme(\n    <Basic\n      searchInputValue=\"\"\n      onSelectedFieldChange={onSelectedFieldChangeMock}\n    />\n  )\n  // Tree doesn't show until search input is clicked\n  expect(screen.queryByText('Orders')).not.toBeInTheDocument()\n  const input = screen.getByRole('textbox')\n  fireEvent.click(input)\n\n  // Drill down\n  fireEvent.click(screen.getByText('Orders'))\n  fireEvent.click(screen.getByText('Created Date'))\n  expect(screen.getByText('Created Month')).toBeVisible()\n\n  fireEvent.change(input, { target: { value: 'zip' } })\n  fireEvent.click(screen.getByText('Zip'))\n  expect(onSelectedFieldChangeMock.mock.calls[0][0]).toMatchObject({\n    field: 'users.zip',\n  })\n})\n\ntest('no matching fields', () => {\n  const onSelectedFieldChangeMock = jest.fn()\n  renderWithTheme(\n    <WithoutDropdown\n      searchInputValue=\"\"\n      onSelectedFieldChange={onSelectedFieldChangeMock}\n    />\n  )\n  const input = screen.getByRole('textbox')\n  fireEvent.change(input, { target: { value: 'foo' } })\n  expect(screen.getByText('No matching fields')).toBeVisible()\n})\n"],"mappings":"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"}