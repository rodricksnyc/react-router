{"version":3,"file":"remove_node.js","names":["removeNode","root","nodeId","workingRoot","cloneDeep","id","undefined","left","right","parent","pointer"],"sources":["../../../../src/utils/tree/remove_node.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\nimport cloneDeep from 'lodash/cloneDeep'\nimport type { FilterASTNode } from '../../types'\n/**\n * Remove node from the AST\n */\nexport const removeNode = (\n  root: FilterASTNode,\n  nodeId: string\n): FilterASTNode | undefined => {\n  const workingRoot = cloneDeep(root)\n\n  if (workingRoot.id === nodeId) {\n    return undefined\n  }\n  if (workingRoot.left && workingRoot.left.id === nodeId) {\n    return workingRoot.right\n  }\n  if (workingRoot.right && workingRoot.right.id === nodeId) {\n    return workingRoot.left\n  }\n\n  let parent = workingRoot\n  let pointer = workingRoot.right\n  while (pointer) {\n    if (pointer.left && pointer.left.id === nodeId) {\n      parent.right = parent.right ? parent.right.right : undefined\n      return workingRoot\n    }\n    if (pointer.right && pointer.right.id === nodeId) {\n      parent.right = parent.right ? parent.right.left : undefined\n      return workingRoot\n    }\n    parent = pointer\n    pointer = pointer.right\n  }\n  return workingRoot\n}\n"],"mappings":";;;;;;;AAIA;;AAKO,IAAMA,UAAU,GAAG,SAAbA,UAAU,CACrBC,IAAmB,EACnBC,MAAc,EACgB;EAC9B,IAAMC,WAAW,GAAG,IAAAC,qBAAS,EAACH,IAAI,CAAC;EAEnC,IAAIE,WAAW,CAACE,EAAE,KAAKH,MAAM,EAAE;IAC7B,OAAOI,SAAS;EAClB;EACA,IAAIH,WAAW,CAACI,IAAI,IAAIJ,WAAW,CAACI,IAAI,CAACF,EAAE,KAAKH,MAAM,EAAE;IACtD,OAAOC,WAAW,CAACK,KAAK;EAC1B;EACA,IAAIL,WAAW,CAACK,KAAK,IAAIL,WAAW,CAACK,KAAK,CAACH,EAAE,KAAKH,MAAM,EAAE;IACxD,OAAOC,WAAW,CAACI,IAAI;EACzB;EAEA,IAAIE,MAAM,GAAGN,WAAW;EACxB,IAAIO,OAAO,GAAGP,WAAW,CAACK,KAAK;EAC/B,OAAOE,OAAO,EAAE;IACd,IAAIA,OAAO,CAACH,IAAI,IAAIG,OAAO,CAACH,IAAI,CAACF,EAAE,KAAKH,MAAM,EAAE;MAC9CO,MAAM,CAACD,KAAK,GAAGC,MAAM,CAACD,KAAK,GAAGC,MAAM,CAACD,KAAK,CAACA,KAAK,GAAGF,SAAS;MAC5D,OAAOH,WAAW;IACpB;IACA,IAAIO,OAAO,CAACF,KAAK,IAAIE,OAAO,CAACF,KAAK,CAACH,EAAE,KAAKH,MAAM,EAAE;MAChDO,MAAM,CAACD,KAAK,GAAGC,MAAM,CAACD,KAAK,GAAGC,MAAM,CAACD,KAAK,CAACD,IAAI,GAAGD,SAAS;MAC3D,OAAOH,WAAW;IACpB;IACAM,MAAM,GAAGC,OAAO;IAChBA,OAAO,GAAGA,OAAO,CAACF,KAAK;EACzB;EACA,OAAOL,WAAW;AACpB,CAAC;AAAA"}