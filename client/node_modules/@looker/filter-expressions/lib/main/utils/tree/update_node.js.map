{"version":3,"file":"update_node.js","names":["updateNode","root","nodeId","updateProps","id","node","left","right"],"sources":["../../../../src/utils/tree/update_node.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\nimport type { FilterASTNode } from '../../types'\n\n/**\n * Traverses the Filter AST looking for a node with id = nodeId and applies updateProps to it\n */\nexport const updateNode = (\n  root: FilterASTNode,\n  nodeId: number,\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  updateProps: any\n): FilterASTNode => {\n  if (root.id === nodeId) {\n    return { ...root, ...updateProps }\n  }\n\n  let node: FilterASTNode | undefined = root\n  while (node) {\n    const { left, right } = node\n    if (left && left.id === nodeId) {\n      node.left = { ...left, ...updateProps }\n      return root\n    }\n\n    if (right && right.id === nodeId) {\n      node.right = { ...right, ...updateProps }\n      return root\n    }\n\n    node = node.right\n  }\n  return root\n}\n"],"mappings":";;;;;;;;;;;AASO,IAAMA,UAAU,GAAG,SAAbA,UAAU,CACrBC,IAAmB,EACnBC,MAAc,EAEdC,WAAgB,EACE;EAClB,IAAIF,IAAI,CAACG,EAAE,KAAKF,MAAM,EAAE;IACtB,uCAAYD,IAAI,GAAKE,WAAW;EAClC;EAEA,IAAIE,IAA+B,GAAGJ,IAAI;EAC1C,OAAOI,IAAI,EAAE;IACX,aAAwBA,IAAI;MAApBC,IAAI,UAAJA,IAAI;MAAEC,KAAK,UAALA,KAAK;IACnB,IAAID,IAAI,IAAIA,IAAI,CAACF,EAAE,KAAKF,MAAM,EAAE;MAC9BG,IAAI,CAACC,IAAI,mCAAQA,IAAI,GAAKH,WAAW,CAAE;MACvC,OAAOF,IAAI;IACb;IAEA,IAAIM,KAAK,IAAIA,KAAK,CAACH,EAAE,KAAKF,MAAM,EAAE;MAChCG,IAAI,CAACE,KAAK,mCAAQA,KAAK,GAAKJ,WAAW,CAAE;MACzC,OAAOF,IAAI;IACb;IAEAI,IAAI,GAAGA,IAAI,CAACE,KAAK;EACnB;EACA,OAAON,IAAI;AACb,CAAC;AAAA"}