{"version":3,"file":"get_user_attribute_matching_type_and_expression.spec.js","names":["jest","mock","describe","userAttributeName","ast","attributeName","beforeEach","parseFilterExpression","mockReturnValue","it","expect","getUserAttributeMatchingTypeAndExpression","toBeNull","anotherUserAttribute","name","userAttribute","toBe"],"sources":["../../../../src/utils/user_attribute/get_user_attribute_matching_type_and_expression.spec.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\nimport { parseFilterExpression } from '../parse_filter_expression'\nimport type { FilterASTNode, UserAttributeWithValue } from '../../types'\nimport { getUserAttributeMatchingTypeAndExpression } from './get_user_attribute_matching_type_and_expression'\n\njest.mock('../parse_filter_expression')\n\ndescribe('getUserAttributeMatchingTypeAndExpression', () => {\n  const userAttributeName = 'ua-name'\n  const ast = {\n    attributeName: userAttributeName,\n  } as FilterASTNode\n\n  beforeEach(() => {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    ;(parseFilterExpression as jest.Mock<any>).mockReturnValue(ast)\n  })\n\n  describe('when there are no user attributes', () => {\n    it('should return null', () => {\n      expect(\n        getUserAttributeMatchingTypeAndExpression('string', 'expr')\n      ).toBeNull()\n      expect(\n        getUserAttributeMatchingTypeAndExpression('string', 'expr', [])\n      ).toBeNull()\n    })\n  })\n\n  describe('when the user attribute is not found', () => {\n    const anotherUserAttribute = {\n      name: 'ua-name-2',\n    } as UserAttributeWithValue\n\n    it('should return null', () => {\n      expect(\n        getUserAttributeMatchingTypeAndExpression('string', 'expr', [\n          anotherUserAttribute,\n        ])\n      ).toBeNull()\n    })\n  })\n\n  describe('when the user attribute is found', () => {\n    const userAttribute = {\n      name: userAttributeName,\n    } as UserAttributeWithValue\n\n    it('should return it', () => {\n      expect(\n        getUserAttributeMatchingTypeAndExpression('string', 'expr', [\n          userAttribute,\n        ])\n      ).toBe(userAttribute)\n    })\n  })\n})\n"],"mappings":";;AAIA;AAEA;;AAEAA,IAAI,CAACC,IAAI,CAAC,4BAA4B,CAAC;AAEvCC,QAAQ,CAAC,2CAA2C,EAAE,YAAM;EAC1D,IAAMC,iBAAiB,GAAG,SAAS;EACnC,IAAMC,GAAG,GAAG;IACVC,aAAa,EAAEF;EACjB,CAAkB;EAElBG,UAAU,CAAC,YAAM;IAEf;IAAEC,8CAAqB,CAAoBC,eAAe,CAACJ,GAAG,CAAC;EACjE,CAAC,CAAC;EAEFF,QAAQ,CAAC,mCAAmC,EAAE,YAAM;IAClDO,EAAE,CAAC,oBAAoB,EAAE,YAAM;MAC7BC,MAAM,CACJ,IAAAC,0FAAyC,EAAC,QAAQ,EAAE,MAAM,CAAC,CAC5D,CAACC,QAAQ,EAAE;MACZF,MAAM,CACJ,IAAAC,0FAAyC,EAAC,QAAQ,EAAE,MAAM,EAAE,EAAE,CAAC,CAChE,CAACC,QAAQ,EAAE;IACd,CAAC,CAAC;EACJ,CAAC,CAAC;EAEFV,QAAQ,CAAC,sCAAsC,EAAE,YAAM;IACrD,IAAMW,oBAAoB,GAAG;MAC3BC,IAAI,EAAE;IACR,CAA2B;IAE3BL,EAAE,CAAC,oBAAoB,EAAE,YAAM;MAC7BC,MAAM,CACJ,IAAAC,0FAAyC,EAAC,QAAQ,EAAE,MAAM,EAAE,CAC1DE,oBAAoB,CACrB,CAAC,CACH,CAACD,QAAQ,EAAE;IACd,CAAC,CAAC;EACJ,CAAC,CAAC;EAEFV,QAAQ,CAAC,kCAAkC,EAAE,YAAM;IACjD,IAAMa,aAAa,GAAG;MACpBD,IAAI,EAAEX;IACR,CAA2B;IAE3BM,EAAE,CAAC,kBAAkB,EAAE,YAAM;MAC3BC,MAAM,CACJ,IAAAC,0FAAyC,EAAC,QAAQ,EAAE,MAAM,EAAE,CAC1DI,aAAa,CACd,CAAC,CACH,CAACC,IAAI,CAACD,aAAa,CAAC;IACvB,CAAC,CAAC;EACJ,CAAC,CAAC;AACJ,CAAC,CAAC"}