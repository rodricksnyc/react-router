{"version":3,"file":"escape_leading_and_trailing_whitespaces.js","names":["escapeLeadingAndTrailingWhitespaces","value","doubleEscapeLastEscapedTrailingSpace","str","replace","_","g1","g2","g3","leading","content","trailing","endsWith","includes"],"sources":["../../../../src/utils/string/escape_leading_and_trailing_whitespaces.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\n/**\n * This function is escapes leading and trailing spaces with a caret for the\n * given string. Trailing spaces are doubly escaped.\n *\n * Double escape param is true when the filter type is matches, but false for \"like\" filters\n * as they\n */\nexport const escapeLeadingAndTrailingWhitespaces = (\n  value: string,\n  doubleEscapeLastEscapedTrailingSpace = true\n) => {\n  // the following regex escapes leading and trailing spaces only\n  // (leaving other spaces, such as between two letters, as they are)\n  let str = value.replace(\n    /^([ ]*)(.*?)([ ]*)$/g,\n    (_: string, g1?: string, g2?: string, g3?: string) => {\n      const leading = g1 ? g1.replace(/[ ]/g, '^ ') : ''\n      const content = g2 || ''\n      const trailing = g3 ? g3.replace(/[ ]/g, '^ ') : ''\n      return leading + content + trailing\n    }\n  )\n\n  // we add a \"^ \"\" at the end of the string to ensure the right-most escaped space is\n  // not trimmed, most notably when the clause is \"ends with\" or \"!ends with\".\n  // The thing is that the ending \"^ \" is disregarded by the server because of an \"rstrip\"\n  // don't add the extra space when the given string includes a quote (single or double),\n  // the server side rstrip does not apply in that case\n  if (\n    str.endsWith('^ ') &&\n    !str.includes(\"'\") &&\n    !str.includes('\"') &&\n    doubleEscapeLastEscapedTrailingSpace\n  ) {\n    str += '^ '\n  }\n  return str\n}\n"],"mappings":";;AAYA,OAAO,MAAMA,mCAAmC,GAAG,CACjDC,KAAa,EACbC,oCAAoC,GAAG,IAAI,KACxC;EAGH,IAAIC,GAAG,GAAGF,KAAK,CAACG,OAAO,CACrB,sBAAsB,EACtB,CAACC,CAAS,EAAEC,EAAW,EAAEC,EAAW,EAAEC,EAAW,KAAK;IACpD,MAAMC,OAAO,GAAGH,EAAE,GAAGA,EAAE,CAACF,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,GAAG,EAAE;IAClD,MAAMM,OAAO,GAAGH,EAAE,IAAI,EAAE;IACxB,MAAMI,QAAQ,GAAGH,EAAE,GAAGA,EAAE,CAACJ,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,GAAG,EAAE;IACnD,OAAOK,OAAO,GAAGC,OAAO,GAAGC,QAAQ;EACrC,CAAC,CACF;;EAOD,IACER,GAAG,CAACS,QAAQ,CAAC,IAAI,CAAC,IAClB,CAACT,GAAG,CAACU,QAAQ,CAAC,GAAG,CAAC,IAClB,CAACV,GAAG,CAACU,QAAQ,CAAC,GAAG,CAAC,IAClBX,oCAAoC,EACpC;IACAC,GAAG,IAAI,IAAI;EACb;EACA,OAAOA,GAAG;AACZ,CAAC"}