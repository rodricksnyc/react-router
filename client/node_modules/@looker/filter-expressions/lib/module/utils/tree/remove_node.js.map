{"version":3,"file":"remove_node.js","names":["cloneDeep","removeNode","root","nodeId","workingRoot","id","undefined","left","right","parent","pointer"],"sources":["../../../../src/utils/tree/remove_node.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\nimport cloneDeep from 'lodash/cloneDeep'\nimport type { FilterASTNode } from '../../types'\n/**\n * Remove node from the AST\n */\nexport const removeNode = (\n  root: FilterASTNode,\n  nodeId: string\n): FilterASTNode | undefined => {\n  const workingRoot = cloneDeep(root)\n\n  if (workingRoot.id === nodeId) {\n    return undefined\n  }\n  if (workingRoot.left && workingRoot.left.id === nodeId) {\n    return workingRoot.right\n  }\n  if (workingRoot.right && workingRoot.right.id === nodeId) {\n    return workingRoot.left\n  }\n\n  let parent = workingRoot\n  let pointer = workingRoot.right\n  while (pointer) {\n    if (pointer.left && pointer.left.id === nodeId) {\n      parent.right = parent.right ? parent.right.right : undefined\n      return workingRoot\n    }\n    if (pointer.right && pointer.right.id === nodeId) {\n      parent.right = parent.right ? parent.right.left : undefined\n      return workingRoot\n    }\n    parent = pointer\n    pointer = pointer.right\n  }\n  return workingRoot\n}\n"],"mappings":";AAIA,OAAOA,SAAS,MAAM,kBAAkB;AAKxC,OAAO,MAAMC,UAAU,GAAG,CACxBC,IAAmB,EACnBC,MAAc,KACgB;EAC9B,MAAMC,WAAW,GAAGJ,SAAS,CAACE,IAAI,CAAC;EAEnC,IAAIE,WAAW,CAACC,EAAE,KAAKF,MAAM,EAAE;IAC7B,OAAOG,SAAS;EAClB;EACA,IAAIF,WAAW,CAACG,IAAI,IAAIH,WAAW,CAACG,IAAI,CAACF,EAAE,KAAKF,MAAM,EAAE;IACtD,OAAOC,WAAW,CAACI,KAAK;EAC1B;EACA,IAAIJ,WAAW,CAACI,KAAK,IAAIJ,WAAW,CAACI,KAAK,CAACH,EAAE,KAAKF,MAAM,EAAE;IACxD,OAAOC,WAAW,CAACG,IAAI;EACzB;EAEA,IAAIE,MAAM,GAAGL,WAAW;EACxB,IAAIM,OAAO,GAAGN,WAAW,CAACI,KAAK;EAC/B,OAAOE,OAAO,EAAE;IACd,IAAIA,OAAO,CAACH,IAAI,IAAIG,OAAO,CAACH,IAAI,CAACF,EAAE,KAAKF,MAAM,EAAE;MAC9CM,MAAM,CAACD,KAAK,GAAGC,MAAM,CAACD,KAAK,GAAGC,MAAM,CAACD,KAAK,CAACA,KAAK,GAAGF,SAAS;MAC5D,OAAOF,WAAW;IACpB;IACA,IAAIM,OAAO,CAACF,KAAK,IAAIE,OAAO,CAACF,KAAK,CAACH,EAAE,KAAKF,MAAM,EAAE;MAChDM,MAAM,CAACD,KAAK,GAAGC,MAAM,CAACD,KAAK,GAAGC,MAAM,CAACD,KAAK,CAACD,IAAI,GAAGD,SAAS;MAC3D,OAAOF,WAAW;IACpB;IACAK,MAAM,GAAGC,OAAO;IAChBA,OAAO,GAAGA,OAAO,CAACF,KAAK;EACzB;EACA,OAAOJ,WAAW;AACpB,CAAC"}