{"version":3,"file":"ErrorBoundary.js","names":["ErrorBoundary","props","state","errorMessage","Error","hasError","stackTrace","setState","t","message","formatErrorMessage","children","error","Component"],"sources":["../../../src/ErrorBoundary/ErrorBoundary.tsx"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport React, { Component } from 'react'\nimport type { ReactNode, ErrorInfo } from 'react'\nimport type { IError } from '@looker/sdk'\nimport { Heading } from '@looker/components'\nimport type { SDKRecord, Fields, CAll } from '../types'\nimport { Translation } from 'react-i18next'\nimport { Debug } from '../Debug'\nimport { formatErrorMessage } from '../utils'\n\ninterface ErrorBoundaryProps {\n  children: ReactNode\n  data?: SDKRecord[]\n  config?: CAll\n  fields?: Fields\n}\n\ninterface ErrorBoundaryState {\n  hasError: boolean\n  errorMessage: Error\n  stackTrace?: ErrorInfo\n}\n\nexport class ErrorBoundary extends Component<\n  ErrorBoundaryProps,\n  ErrorBoundaryState\n> {\n  constructor(props: ErrorBoundaryProps) {\n    super(props)\n    this.state = { errorMessage: new Error(''), hasError: false }\n  }\n\n  static getDerivedStateFromError(error: Error) {\n    return { errorMessage: error, hasError: true }\n  }\n\n  componentDidCatch(errorMessage: Error, stackTrace: ErrorInfo) {\n    this.setState(state => ({ ...state, errorMessage, stackTrace }))\n  }\n\n  render() {\n    if (this.state.hasError) {\n      const { errorMessage, stackTrace } = this.state\n      return (\n        <>\n          <Heading>\n            <Translation ns=\"ErrorBoundary\">\n              {t => {\n                return t('Something went wrong')\n              }}\n            </Translation>\n          </Heading>\n          <Debug\n            ok={false}\n            error={\n              {\n                message: formatErrorMessage(errorMessage),\n                ...stackTrace,\n              } as IError\n            }\n            {...this.props}\n          />\n        </>\n      )\n    }\n    return this.props.children\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;AAKA;AAGA;AAEA;AACA;AACA;AAA6C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAehCA,aAAa;EAAA;EAAA;EAIxB,uBAAYC,KAAyB,EAAE;IAAA;IAAA;IACrC,0BAAMA,KAAK;IACX,MAAKC,KAAK,GAAG;MAAEC,YAAY,EAAE,IAAIC,KAAK,CAAC,EAAE,CAAC;MAAEC,QAAQ,EAAE;IAAM,CAAC;IAAA;EAC/D;EAAC;IAAA;IAAA,OAMD,2BAAkBF,YAAmB,EAAEG,UAAqB,EAAE;MAC5D,IAAI,CAACC,QAAQ,CAAC,UAAAL,KAAK;QAAA,uCAAUA,KAAK;UAAEC,YAAY,EAAZA,YAAY;UAAEG,UAAU,EAAVA;QAAU;MAAA,CAAG,CAAC;IAClE;EAAC;IAAA;IAAA,OAED,kBAAS;MACP,IAAI,IAAI,CAACJ,KAAK,CAACG,QAAQ,EAAE;QACvB,mBAAqC,IAAI,CAACH,KAAK;UAAvCC,YAAY,gBAAZA,YAAY;UAAEG,UAAU,gBAAVA,UAAU;QAChC,OACE,kEACE,gCAAC,mBAAO,QACN,gCAAC,yBAAW;UAAC,EAAE,EAAC;QAAe,GAC5B,UAAAE,CAAC,EAAI;UACJ,OAAOA,CAAC,CAAC,sBAAsB,CAAC;QAClC,CAAC,CACW,CACN,EACV,gCAAC,YAAK;UACJ,EAAE,EAAE,KAAM;UACV,KAAK;YAEDC,OAAO,EAAE,IAAAC,yBAAkB,EAACP,YAAY;UAAC,GACtCG,UAAU;QAEhB,GACG,IAAI,CAACL,KAAK,EACd,CACD;MAEP;MACA,OAAO,IAAI,CAACA,KAAK,CAACU,QAAQ;IAC5B;EAAC;IAAA;IAAA,OAlCD,kCAAgCC,KAAY,EAAE;MAC5C,OAAO;QAAET,YAAY,EAAES,KAAK;QAAEP,QAAQ,EAAE;MAAK,CAAC;IAChD;EAAC;EAAA;AAAA,EAXgCQ,gBAAS;AAAA"}