{"version":3,"file":"legendValue.spec.js","names":["describe","test","legendValue","config","mockPieConfig","data","mockSdkDataResponse","fields","mockFields","expect","legend","toEqual","position","type","value","label_type","undefined","transformedConfig"],"sources":["../../../src/configTransformations/legendValue.spec.ts"],"sourcesContent":["/*\n\n MIT License\n\n Copyright (c) 2022 Looker Data Sciences, Inc.\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n\n */\n\nimport { legendValue } from './legendValue'\nimport { mockPieConfig, mockFields, mockSdkDataResponse } from '../fixtures'\n\ndescribe('legendValue', () => {\n  test('default value', () => {\n    const { config } = legendValue({\n      config: { ...mockPieConfig },\n      data: mockSdkDataResponse,\n      fields: mockFields,\n    })\n\n    expect(config.legend).toEqual({\n      position: 'bottom',\n      type: 'legend',\n      value: 'label',\n    })\n  })\n\n  describe('config.label_type ===', () => {\n    test('lab', () => {\n      const config = {\n        ...mockPieConfig,\n        label_type: 'lab' as const,\n        legend: undefined,\n      }\n      const { config: transformedConfig } = legendValue({\n        config,\n        data: mockSdkDataResponse,\n        fields: mockFields,\n      })\n      if (transformedConfig.legend) {\n        expect(transformedConfig.legend.value).toEqual('label')\n      }\n    })\n\n    test('labVal', () => {\n      const config = {\n        ...mockPieConfig,\n        label_type: 'labVal' as const,\n        legend: undefined,\n      }\n      const { config: transformedConfig } = legendValue({\n        config,\n        data: mockSdkDataResponse,\n        fields: mockFields,\n      })\n      if (transformedConfig.legend) {\n        expect(transformedConfig.legend.value).toEqual('label_value')\n      }\n    })\n\n    test('val', () => {\n      const config = {\n        ...mockPieConfig,\n        label_type: 'val' as const,\n        legend: undefined,\n      }\n      const { config: transformedConfig } = legendValue({\n        config,\n        data: mockSdkDataResponse,\n        fields: mockFields,\n      })\n      if (transformedConfig.legend) {\n        expect(transformedConfig.legend.value).toEqual('value')\n      }\n    })\n\n    test('per', () => {\n      const config = {\n        ...mockPieConfig,\n        label_type: 'per' as const,\n        legend: undefined,\n      }\n      const { config: transformedConfig } = legendValue({\n        config,\n        data: mockSdkDataResponse,\n        fields: mockFields,\n      })\n      if (transformedConfig.legend) {\n        expect(transformedConfig.legend.value).toEqual('percent')\n      }\n    })\n\n    test('labPer', () => {\n      const config = {\n        ...mockPieConfig,\n        label_type: 'labPer' as const,\n        legend: undefined,\n      }\n      const { config: transformedConfig } = legendValue({\n        config,\n        data: mockSdkDataResponse,\n        fields: mockFields,\n      })\n      if (transformedConfig.legend) {\n        expect(transformedConfig.legend.value).toEqual('label_percent')\n      }\n    })\n  })\n\n  describe('config.legend.value ===', () => {\n    test('\"label\"', () => {\n      const config = { ...mockPieConfig, legend: { value: 'label' as const } }\n      const { config: transformedConfig } = legendValue({\n        config,\n        data: mockSdkDataResponse,\n        fields: mockFields,\n      })\n      if (transformedConfig.legend) {\n        expect(transformedConfig.legend.value).toEqual('label')\n      }\n    })\n\n    test('\"value\"', () => {\n      const config = { ...mockPieConfig, legend: { value: 'value' as const } }\n      const { config: transformedConfig } = legendValue({\n        config,\n        data: mockSdkDataResponse,\n        fields: mockFields,\n      })\n      if (transformedConfig.legend) {\n        expect(transformedConfig.legend.value).toEqual('value')\n      }\n    })\n\n    test('\"percent\"', () => {\n      const config = { ...mockPieConfig, legend: { value: 'percent' as const } }\n      const { config: transformedConfig } = legendValue({\n        config,\n        data: mockSdkDataResponse,\n        fields: mockFields,\n      })\n      if (transformedConfig.legend) {\n        expect(transformedConfig.legend.value).toEqual('percent')\n      }\n    })\n\n    test('\"label_value\"', () => {\n      const config = {\n        ...mockPieConfig,\n        legend: { value: 'label_value' as const },\n      }\n      const { config: transformedConfig } = legendValue({\n        config,\n        data: mockSdkDataResponse,\n        fields: mockFields,\n      })\n      if (transformedConfig.legend) {\n        expect(transformedConfig.legend.value).toEqual('label_value')\n      }\n    })\n\n    test('\"label_percent\"', () => {\n      const config = {\n        ...mockPieConfig,\n        legend: { value: 'label_percent' as const },\n      }\n      const { config: transformedConfig } = legendValue({\n        config,\n        data: mockSdkDataResponse,\n        fields: mockFields,\n      })\n      if (transformedConfig.legend) {\n        expect(transformedConfig.legend.value).toEqual('label_percent')\n      }\n    })\n  })\n\n  test('config.legend === false', () => {\n    const config = { ...mockPieConfig, legend: false }\n    const { config: transformedConfig } = legendValue({\n      config,\n      data: mockSdkDataResponse,\n      fields: mockFields,\n    })\n    expect(transformedConfig.legend).toEqual(false)\n  })\n})\n"],"mappings":"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"}