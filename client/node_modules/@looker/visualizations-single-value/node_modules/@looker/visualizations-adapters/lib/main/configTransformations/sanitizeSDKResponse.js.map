{"version":3,"file":"sanitizeSDKResponse.js","names":["KEYS_TO_REMOVE","sanitizeSDKResponse","config","data","fields","unusedVar","undefined","omit"],"sources":["../../../src/configTransformations/sanitizeSDKResponse.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport omit from 'lodash/omit'\nimport type { ConfigHelper, CAll } from '../types'\n\nexport const KEYS_TO_REMOVE = [\n  'color_application',\n  'defaults_version',\n  'default_series_colors',\n  'hidden_fields',\n  'hide_legend',\n  'interpolation',\n  'label_density',\n  'label_type',\n  'label_type',\n  'legend_position',\n  'plot_size_by_field',\n  'point_style',\n  'series_cell_visualizations',\n  'series_colors',\n  'series_labels',\n  'series_point_styles',\n  'series_types',\n  'show_null_points',\n  'show_value_labels',\n  'show_view_names',\n  'show_x_axis_label',\n  'show_x_axis_ticks',\n  'show_y_axis_labels',\n  'show_y_axis_ticks',\n  'size_by_field',\n  'stacking',\n  'trellis',\n  'value_labels',\n  'x_axis_gridlines',\n  'x_axis_reversed',\n  'x_axis_scale',\n  'y_axes',\n  'y_axis_combined',\n  'y_axis_gridlines',\n  'y_axis_reversed',\n  'y_axis_scale_mode',\n  'y_axis_tick_density',\n  'y_axis_tick_density_custom',\n] as const\n\n/**\n * This function should be run for all chart types, AFTER all other config helpers.\n * It removes top-level api responses that we use to derive settings, but are\n * not publicly supported.\n */\nexport const sanitizeSDKResponse: ConfigHelper<CAll> = ({\n  config,\n  data,\n  fields,\n}) => {\n  type KeysOfUnion<T> = T extends T ? keyof T : never\n  type ValidConfigKeys = KeysOfUnion<CAll>\n\n  // Ensure that there is no overlap between keysToRemove and ValidConfigKeys.\n  // This prevents accidental removal of config keys that we do intend to support.\n  type IsNever<T extends never> = T\n  type MustBeNever = IsNever<ValidConfigKeys & typeof KEYS_TO_REMOVE[number]>\n\n  // @ts-expect-error: unused variable. just needed to do something with type MustBeNever\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const unusedVar: MustBeNever = undefined\n\n  return {\n    config: omit(config, KEYS_TO_REMOVE),\n    data,\n    fields,\n  }\n}\n"],"mappings":";;;;;;;AAKA;;AAGO,IAAMA,cAAc,GAAG,CAC5B,mBAAmB,EACnB,kBAAkB,EAClB,uBAAuB,EACvB,eAAe,EACf,aAAa,EACb,eAAe,EACf,eAAe,EACf,YAAY,EACZ,YAAY,EACZ,iBAAiB,EACjB,oBAAoB,EACpB,aAAa,EACb,4BAA4B,EAC5B,eAAe,EACf,eAAe,EACf,qBAAqB,EACrB,cAAc,EACd,kBAAkB,EAClB,mBAAmB,EACnB,iBAAiB,EACjB,mBAAmB,EACnB,mBAAmB,EACnB,oBAAoB,EACpB,mBAAmB,EACnB,eAAe,EACf,UAAU,EACV,SAAS,EACT,cAAc,EACd,kBAAkB,EAClB,iBAAiB,EACjB,cAAc,EACd,QAAQ,EACR,iBAAiB,EACjB,kBAAkB,EAClB,iBAAiB,EACjB,mBAAmB,EACnB,qBAAqB,EACrB,4BAA4B,CACpB;;AAAA;AAOH,IAAMC,mBAAuC,GAAG,SAA1CA,mBAAuC,OAI9C;EAAA,IAHJC,MAAM,QAANA,MAAM;IACNC,IAAI,QAAJA,IAAI;IACJC,MAAM,QAANA,MAAM;EAYN,IAAMC,SAAsB,GAAGC,SAAS;EAExC,OAAO;IACLJ,MAAM,EAAE,IAAAK,gBAAI,EAACL,MAAM,EAAEF,cAAc,CAAC;IACpCG,IAAI,EAAJA,IAAI;IACJC,MAAM,EAANA;EACF,CAAC;AACH,CAAC;AAAA"}