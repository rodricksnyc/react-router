{"version":3,"file":"yAxisRange.js","names":["yAxisRange","config","data","fields","y_axes","y_axis_raw","y_axis","restConfig","longestListLength","Math","max","length","yAxisWithDefaults","i","rawAxisAtPosition","omitBy","isNull","officialAxisAtPosition","minValue","maxValue","range","undefined"],"sources":["../../../src/configTransformations/yAxisRange.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport type { ConfigHelper, YAxisConfig, YAxisRaw } from '../types'\nimport type { CSparkline } from '../adapters'\nimport omitBy from 'lodash/omitBy'\nimport isNull from 'lodash/isNull'\n\n/**\n * Transformation sets ONLY the range values for y-axis config object.\n * Created for use in Sparkline where the y-axis options are much simpler than\n * other cartesian charts.\n */\nexport const yAxisRange: ConfigHelper<CSparkline> = ({\n  config,\n  data,\n  fields,\n}) => {\n  const {\n    y_axes: y_axis_raw = [{}] as YAxisRaw[], // default object from SDK\n    y_axis = [{}] as YAxisConfig[], // officially supported config\n    ...restConfig\n  } = config\n\n  const longestListLength = Math.max(y_axis_raw.length, y_axis.length)\n  const yAxisWithDefaults: YAxisConfig[] = []\n\n  for (let i = 0; i < longestListLength; i++) {\n    const rawAxisAtPosition = omitBy(y_axis_raw[i] || {}, isNull)\n    const officialAxisAtPosition = y_axis[i] || {}\n\n    // raw sdk attributes\n    const { minValue, maxValue } = rawAxisAtPosition\n\n    // officially supported config values, falling back to raw sdk attributes\n    const {\n      range = [\n        minValue === undefined ? 'auto' : minValue,\n        maxValue === undefined ? 'auto' : maxValue,\n      ],\n    } = officialAxisAtPosition\n\n    yAxisWithDefaults[i] = { ...officialAxisAtPosition, range }\n  }\n\n  return {\n    config: {\n      ...restConfig,\n      y_axis: yAxisWithDefaults,\n    },\n    data,\n    fields,\n  }\n}\n"],"mappings":";;;;;;;;;AAOA;AACA;AAAkC;AAAA;AAAA;AAO3B,IAAMA,UAAoC,GAAG,SAAvCA,UAAoC,OAI3C;EAAA,IAHJC,MAAM,QAANA,MAAM;IACNC,IAAI,QAAJA,IAAI;IACJC,MAAM,QAANA,MAAM;EAEN,qBAIIF,MAAM,CAHRG,MAAM;IAAEC,UAAU,+BAAG,CAAC,CAAC,CAAC,CAAC;IAAA,iBAGvBJ,MAAM,CAFRK,MAAM;IAANA,MAAM,+BAAG,CAAC,CAAC,CAAC,CAAC;IACVC,UAAU,6CACXN,MAAM;EAEV,IAAMO,iBAAiB,GAAGC,IAAI,CAACC,GAAG,CAACL,UAAU,CAACM,MAAM,EAAEL,MAAM,CAACK,MAAM,CAAC;EACpE,IAAMC,iBAAgC,GAAG,EAAE;EAE3C,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGL,iBAAiB,EAAEK,CAAC,EAAE,EAAE;IAC1C,IAAMC,iBAAiB,GAAG,IAAAC,kBAAM,EAACV,UAAU,CAACQ,CAAC,CAAC,IAAI,CAAC,CAAC,EAAEG,kBAAM,CAAC;IAC7D,IAAMC,sBAAsB,GAAGX,MAAM,CAACO,CAAC,CAAC,IAAI,CAAC,CAAC;;IAG9C,IAAQK,QAAQ,GAAeJ,iBAAiB,CAAxCI,QAAQ;MAAEC,QAAQ,GAAKL,iBAAiB,CAA9BK,QAAQ;;IAG1B,6BAKIF,sBAAsB,CAJxBG,KAAK;MAALA,KAAK,uCAAG,CACNF,QAAQ,KAAKG,SAAS,GAAG,MAAM,GAAGH,QAAQ,EAC1CC,QAAQ,KAAKE,SAAS,GAAG,MAAM,GAAGF,QAAQ,CAC3C;IAGHP,iBAAiB,CAACC,CAAC,CAAC,mCAAQI,sBAAsB;MAAEG,KAAK,EAALA;IAAK,EAAE;EAC7D;EAEA,OAAO;IACLnB,MAAM,kCACDM,UAAU;MACbD,MAAM,EAAEM;IAAiB,EAC1B;IACDV,IAAI,EAAJA,IAAI;IACJC,MAAM,EAANA;EACF,CAAC;AACH,CAAC;AAAA"}