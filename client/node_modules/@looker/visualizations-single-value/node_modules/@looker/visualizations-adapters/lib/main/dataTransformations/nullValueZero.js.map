{"version":3,"file":"nullValueZero.js","names":["nullValueZero","data","fields","config","render_null_values","measureNames","getMeasureNames","draftData","map","d","measures","Object","entries","pick","key","val","Number","fromEntries"],"sources":["../../../src/dataTransformations/nullValueZero.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport type { CLineBase } from '../adapters'\nimport type { ConfigHelper } from '../types'\nimport { getMeasureNames } from '../utils'\nimport pick from 'lodash/pick'\n\n/**\n * Data transformation replaces all null values with 0 when\n * config.render_null_values is true.\n */\n\nexport const nullValueZero: ConfigHelper<CLineBase> = ({\n  data,\n  fields,\n  config,\n}) => {\n  if (config?.render_null_values) {\n    const measureNames = getMeasureNames(fields)\n    const draftData = data.map((d) => {\n      const measures = Object.entries(pick(d, measureNames)).map(\n        ([key, val]) => [key, Number(val)]\n      )\n      return { ...d, ...Object.fromEntries(measures) }\n    })\n\n    return { data: draftData, fields, config }\n  }\n  return { data, fields, config }\n}\n"],"mappings":";;;;;;;;;AAOA;AACA;AAA8B;AAAA;;AAOvB,IAAMA,aAAsC,GAAG,SAAzCA,aAAsC,OAI7C;EAAA,IAHJC,IAAI,QAAJA,IAAI;IACJC,MAAM,QAANA,MAAM;IACNC,MAAM,QAANA,MAAM;EAEN,IAAIA,MAAM,aAANA,MAAM,eAANA,MAAM,CAAEC,kBAAkB,EAAE;IAC9B,IAAMC,YAAY,GAAG,IAAAC,sBAAe,EAACJ,MAAM,CAAC;IAC5C,IAAMK,SAAS,GAAGN,IAAI,CAACO,GAAG,CAAC,UAACC,CAAC,EAAK;MAChC,IAAMC,QAAQ,GAAGC,MAAM,CAACC,OAAO,CAAC,IAAAC,gBAAI,EAACJ,CAAC,EAAEJ,YAAY,CAAC,CAAC,CAACG,GAAG,CACxD;QAAA;UAAEM,GAAG;UAAEC,GAAG;QAAA,OAAM,CAACD,GAAG,EAAEE,MAAM,CAACD,GAAG,CAAC,CAAC;MAAA,EACnC;MACD,uCAAYN,CAAC,GAAKE,MAAM,CAACM,WAAW,CAACP,QAAQ,CAAC;IAChD,CAAC,CAAC;IAEF,OAAO;MAAET,IAAI,EAAEM,SAAS;MAAEL,MAAM,EAANA,MAAM;MAAEC,MAAM,EAANA;IAAO,CAAC;EAC5C;EACA,OAAO;IAAEF,IAAI,EAAJA,IAAI;IAAEC,MAAM,EAANA,MAAM;IAAEC,MAAM,EAANA;EAAO,CAAC;AACjC,CAAC;AAAA"}