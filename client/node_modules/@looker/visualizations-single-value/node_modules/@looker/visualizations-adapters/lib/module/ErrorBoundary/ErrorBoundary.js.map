{"version":3,"file":"ErrorBoundary.js","names":["React","Component","Heading","Translation","Debug","formatErrorMessage","ErrorBoundary","constructor","props","state","errorMessage","Error","hasError","getDerivedStateFromError","error","componentDidCatch","stackTrace","setState","render","t","message","children"],"sources":["../../../src/ErrorBoundary/ErrorBoundary.tsx"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport React, { Component } from 'react'\nimport type { ReactNode, ErrorInfo } from 'react'\nimport type { IError } from '@looker/sdk'\nimport { Heading } from '@looker/components'\nimport type { SDKRecord, Fields, CAll } from '../types'\nimport { Translation } from 'react-i18next'\nimport { Debug } from '../Debug'\nimport { formatErrorMessage } from '../utils'\n\ninterface ErrorBoundaryProps {\n  children: ReactNode\n  data?: SDKRecord[]\n  config?: CAll\n  fields?: Fields\n}\n\ninterface ErrorBoundaryState {\n  hasError: boolean\n  errorMessage: Error\n  stackTrace?: ErrorInfo\n}\n\nexport class ErrorBoundary extends Component<\n  ErrorBoundaryProps,\n  ErrorBoundaryState\n> {\n  constructor(props: ErrorBoundaryProps) {\n    super(props)\n    this.state = { errorMessage: new Error(''), hasError: false }\n  }\n\n  static getDerivedStateFromError(error: Error) {\n    return { errorMessage: error, hasError: true }\n  }\n\n  componentDidCatch(errorMessage: Error, stackTrace: ErrorInfo) {\n    this.setState(state => ({ ...state, errorMessage, stackTrace }))\n  }\n\n  render() {\n    if (this.state.hasError) {\n      const { errorMessage, stackTrace } = this.state\n      return (\n        <>\n          <Heading>\n            <Translation ns=\"ErrorBoundary\">\n              {t => {\n                return t('Something went wrong')\n              }}\n            </Translation>\n          </Heading>\n          <Debug\n            ok={false}\n            error={\n              {\n                message: formatErrorMessage(errorMessage),\n                ...stackTrace,\n              } as IError\n            }\n            {...this.props}\n          />\n        </>\n      )\n    }\n    return this.props.children\n  }\n}\n"],"mappings":";;;;;AAKA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AAGxC,SAASC,OAAO,QAAQ,oBAAoB;AAE5C,SAASC,WAAW,QAAQ,eAAe;AAC3C,SAASC,KAAK,QAAQ,UAAU;AAChC,SAASC,kBAAkB,QAAQ,UAAU;AAe7C,OAAO,MAAMC,aAAa,SAASL,SAAS,CAG1C;EACAM,WAAW,CAACC,KAAyB,EAAE;IACrC,KAAK,CAACA,KAAK,CAAC;IACZ,IAAI,CAACC,KAAK,GAAG;MAAEC,YAAY,EAAE,IAAIC,KAAK,CAAC,EAAE,CAAC;MAAEC,QAAQ,EAAE;IAAM,CAAC;EAC/D;EAEA,OAAOC,wBAAwB,CAACC,KAAY,EAAE;IAC5C,OAAO;MAAEJ,YAAY,EAAEI,KAAK;MAAEF,QAAQ,EAAE;IAAK,CAAC;EAChD;EAEAG,iBAAiB,CAACL,YAAmB,EAAEM,UAAqB,EAAE;IAC5D,IAAI,CAACC,QAAQ,CAACR,KAAK,oCAAUA,KAAK;MAAEC,YAAY;MAAEM;IAAU,EAAG,CAAC;EAClE;EAEAE,MAAM,GAAG;IACP,IAAI,IAAI,CAACT,KAAK,CAACG,QAAQ,EAAE;MACvB,MAAM;QAAEF,YAAY;QAAEM;MAAW,CAAC,GAAG,IAAI,CAACP,KAAK;MAC/C,OACE,0CACE,oBAAC,OAAO,QACN,oBAAC,WAAW;QAAC,EAAE,EAAC;MAAe,GAC5BU,CAAC,IAAI;QACJ,OAAOA,CAAC,CAAC,sBAAsB,CAAC;MAClC,CAAC,CACW,CACN,EACV,oBAAC,KAAK;QACJ,EAAE,EAAE,KAAM;QACV,KAAK;UAEDC,OAAO,EAAEf,kBAAkB,CAACK,YAAY;QAAC,GACtCM,UAAU;MAEhB,GACG,IAAI,CAACR,KAAK,EACd,CACD;IAEP;IACA,OAAO,IAAI,CAACA,KAAK,CAACa,QAAQ;EAC5B;AACF"}