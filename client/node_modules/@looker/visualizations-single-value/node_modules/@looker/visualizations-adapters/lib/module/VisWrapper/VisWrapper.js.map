{"version":3,"file":"VisWrapper.js","names":["React","forwardRef","styled","css","useTheme","ComponentsProvider","VisWrapperInternal","ref","legend","props","theme","displayName","flexDirection","POSITION_MAP","top","right","left","bottom","POSITION","position","VisWrapper"],"sources":["../../../src/VisWrapper/VisWrapper.tsx"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport type { ReactNode, Ref } from 'react'\nimport React, { forwardRef } from 'react'\nimport styled, { css, useTheme } from 'styled-components'\nimport { ComponentsProvider } from '@looker/components'\nimport type { CommonCartesianProperties, LegendPositions } from '../types'\n\nexport type VisWrapperProps = {\n  children?: ReactNode\n  legend?: CommonCartesianProperties['legend']\n}\n\nexport type VisWrapperInternalProps = VisWrapperProps & {\n  className?: string\n}\n\nconst VisWrapperInternal = forwardRef(\n  (\n    { legend, ...props }: VisWrapperInternalProps,\n    ref?: Ref<HTMLDivElement>\n  ) => {\n    const theme = useTheme()\n\n    if (!theme) {\n      // Recursively wrap VisWrapper in ComponentsProvider to ensure that\n      // individual chart components can be rendered outside of Looker Components context\n      // without breaking.\n      return (\n        <ComponentsProvider>\n          <VisWrapperInternal {...props} ref={ref} />\n        </ComponentsProvider>\n      )\n    }\n\n    return <div {...props} ref={ref} />\n  }\n)\n\nVisWrapperInternal.displayName = `VisWrapperInternal`\n\nconst flexDirection = ({ legend }: Pick<VisWrapperProps, 'legend'>) => {\n  const POSITION_MAP: Record<LegendPositions, string> = {\n    top: 'column-reverse',\n    right: 'row',\n    left: 'row-reverse',\n    bottom: 'column',\n  }\n\n  const POSITION = legend ? legend.position : 'bottom'\n\n  return css`\n    flex-direction: ${POSITION_MAP[POSITION]};\n    justify-content: ${POSITION === 'left' ? `flex-end` : `flex-start`};\n  `\n}\n\nexport const VisWrapper = styled(VisWrapperInternal)`\n  /*\n    Flex properties primarily used to reposition legend\n    based on prop.\n   */\n  display: flex;\n  flex: 1;\n  ${flexDirection}\n\n  /*\n    This style override allows longer dimension to fully render on x-axis.\n    Without it, long dimension values get cut off (after being rotated).\n  */\n  & > div > svg {\n    overflow: visible;\n  }\n`\n"],"mappings":";;;;;;;AAMA,OAAOA,KAAK,IAAIC,UAAU,QAAQ,OAAO;AACzC,OAAOC,MAAM,IAAIC,GAAG,EAAEC,QAAQ,QAAQ,mBAAmB;AACzD,SAASC,kBAAkB,QAAQ,oBAAoB;AAYvD,MAAMC,kBAAkB,GAAGL,UAAU,CACnC,OAEEM,GAAyB,KACtB;EAAA,IAFH;MAAEC;IAA0C,CAAC;IAAhCC,KAAK;EAGlB,MAAMC,KAAK,GAAGN,QAAQ,EAAE;EAExB,IAAI,CAACM,KAAK,EAAE;IAIV,OACE,oBAAC,kBAAkB,QACjB,oBAAC,kBAAkB,eAAKD,KAAK;MAAE,GAAG,EAAEF;IAAI,GAAG,CACxB;EAEzB;EAEA,OAAO,wCAASE,KAAK;IAAE,GAAG,EAAEF;EAAI,GAAG;AACrC,CAAC,CACF;AAEDD,kBAAkB,CAACK,WAAW,GAAI,oBAAmB;AAErD,MAAMC,aAAa,GAAG,CAAC;EAAEJ;AAAwC,CAAC,KAAK;EACrE,MAAMK,YAA6C,GAAG;IACpDC,GAAG,EAAE,gBAAgB;IACrBC,KAAK,EAAE,KAAK;IACZC,IAAI,EAAE,aAAa;IACnBC,MAAM,EAAE;EACV,CAAC;EAED,MAAMC,QAAQ,GAAGV,MAAM,GAAGA,MAAM,CAACW,QAAQ,GAAG,QAAQ;EAEpD,OAAOhB,GAAG,cAAC;AACb,sBAAoB,CAAyB;AAC7C,uBAAqB,CAAkD;AACvE,GAAE,GAFoBU,YAAY,CAACK,QAAQ,CAAC,EACrBA,QAAQ,KAAK,MAAM,GAAI,UAAS,GAAI,YAAW;AAEtE,CAAC;AAED,OAAO,MAAME,UAAU,GAAGlB,MAAM,CAACI,kBAAkB,CAAC;EAAA;EAAA;AAAA,kBAAC;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,IAAE,CAAgB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IATIM,aAAa,CAShB"}