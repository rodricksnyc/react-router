{"version":3,"file":"yAxisRange.js","names":["omitBy","isNull","yAxisRange","config","data","fields","y_axes","y_axis_raw","y_axis","restConfig","longestListLength","Math","max","length","yAxisWithDefaults","i","rawAxisAtPosition","officialAxisAtPosition","minValue","maxValue","range","undefined"],"sources":["../../../src/configTransformations/yAxisRange.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport type { ConfigHelper, YAxisConfig, YAxisRaw } from '../types'\nimport type { CSparkline } from '../adapters'\nimport omitBy from 'lodash/omitBy'\nimport isNull from 'lodash/isNull'\n\n/**\n * Transformation sets ONLY the range values for y-axis config object.\n * Created for use in Sparkline where the y-axis options are much simpler than\n * other cartesian charts.\n */\nexport const yAxisRange: ConfigHelper<CSparkline> = ({\n  config,\n  data,\n  fields,\n}) => {\n  const {\n    y_axes: y_axis_raw = [{}] as YAxisRaw[], // default object from SDK\n    y_axis = [{}] as YAxisConfig[], // officially supported config\n    ...restConfig\n  } = config\n\n  const longestListLength = Math.max(y_axis_raw.length, y_axis.length)\n  const yAxisWithDefaults: YAxisConfig[] = []\n\n  for (let i = 0; i < longestListLength; i++) {\n    const rawAxisAtPosition = omitBy(y_axis_raw[i] || {}, isNull)\n    const officialAxisAtPosition = y_axis[i] || {}\n\n    // raw sdk attributes\n    const { minValue, maxValue } = rawAxisAtPosition\n\n    // officially supported config values, falling back to raw sdk attributes\n    const {\n      range = [\n        minValue === undefined ? 'auto' : minValue,\n        maxValue === undefined ? 'auto' : maxValue,\n      ],\n    } = officialAxisAtPosition\n\n    yAxisWithDefaults[i] = { ...officialAxisAtPosition, range }\n  }\n\n  return {\n    config: {\n      ...restConfig,\n      y_axis: yAxisWithDefaults,\n    },\n    data,\n    fields,\n  }\n}\n"],"mappings":";;;;;;AAOA,OAAOA,MAAM,MAAM,eAAe;AAClC,OAAOC,MAAM,MAAM,eAAe;;AAOlC,OAAO,MAAMC,UAAoC,GAAG,CAAC;EACnDC,MAAM;EACNC,IAAI;EACJC;AACF,CAAC,KAAK;EACJ,MAAM;MACJC,MAAM,EAAEC,UAAU,GAAG,CAAC,CAAC,CAAC,CAAe;MACvCC,MAAM,GAAG,CAAC,CAAC,CAAC;IAEd,CAAC,GAAGL,MAAM;IADLM,UAAU,4BACXN,MAAM;EAEV,MAAMO,iBAAiB,GAAGC,IAAI,CAACC,GAAG,CAACL,UAAU,CAACM,MAAM,EAAEL,MAAM,CAACK,MAAM,CAAC;EACpE,MAAMC,iBAAgC,GAAG,EAAE;EAE3C,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGL,iBAAiB,EAAEK,CAAC,EAAE,EAAE;IAC1C,MAAMC,iBAAiB,GAAGhB,MAAM,CAACO,UAAU,CAACQ,CAAC,CAAC,IAAI,CAAC,CAAC,EAAEd,MAAM,CAAC;IAC7D,MAAMgB,sBAAsB,GAAGT,MAAM,CAACO,CAAC,CAAC,IAAI,CAAC,CAAC;;IAG9C,MAAM;MAAEG,QAAQ;MAAEC;IAAS,CAAC,GAAGH,iBAAiB;;IAGhD,MAAM;MACJI,KAAK,GAAG,CACNF,QAAQ,KAAKG,SAAS,GAAG,MAAM,GAAGH,QAAQ,EAC1CC,QAAQ,KAAKE,SAAS,GAAG,MAAM,GAAGF,QAAQ;IAE9C,CAAC,GAAGF,sBAAsB;IAE1BH,iBAAiB,CAACC,CAAC,CAAC,mCAAQE,sBAAsB;MAAEG;IAAK,EAAE;EAC7D;EAEA,OAAO;IACLjB,MAAM,kCACDM,UAAU;MACbD,MAAM,EAAEM;IAAiB,EAC1B;IACDV,IAAI;IACJC;EACF,CAAC;AACH,CAAC"}