{"version":3,"file":"buildPivotFields.spec.js","names":["buildPivotFields","mockFields","mockPivots","describe","it","transformedFields","fields","pivots","measures","pivotMeasures","expect","length","toBe","ordersCountComplete","find","pivotMeasure","name","label","label_short","not","toBeUndefined","ordersAveragePending","pivoted_label"],"sources":["../../../src/utils/buildPivotFields.spec.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport { buildPivotFields } from './buildPivotFields'\nimport { mockFields, mockPivots } from '../fixtures'\n\ndescribe('buildPivotFields', () => {\n  it('creates pivot measure objects for each measure and pivot value pairing', () => {\n    const transformedFields = buildPivotFields({\n      fields: mockFields,\n      pivots: mockPivots,\n    })\n\n    const { measures: pivotMeasures } = transformedFields\n\n    // 2 measures * 3 pivot values\n    expect(pivotMeasures.length).toBe(6)\n\n    // Check for orders.count - pivot complete object\n    const ordersCountComplete = pivotMeasures.find(\n      (pivotMeasure) => pivotMeasure.name === 'complete - orders.count'\n    ) || { label: 'faux_label', label_short: 'faux_label_short' }\n\n    expect(ordersCountComplete).not.toBeUndefined()\n    expect(ordersCountComplete.label_short).toBe('Complete')\n    expect(ordersCountComplete.label).toBe('Orders Count')\n\n    // Check for orders.average_total_amount_of_order_usd - pivot pending object\n    const ordersAveragePending = pivotMeasures.find(\n      (pivotMeasure) =>\n        pivotMeasure.name ===\n        'pending - orders.average_total_amount_of_order_usd'\n    ) || { label: 'faux_label', label_short: 'faux_label_short' }\n    expect(ordersAveragePending).not.toBeUndefined()\n    expect(ordersAveragePending.label_short).toBe('Pending')\n    expect(ordersAveragePending.label).toBe(\n      'Orders Average Total Amount of Order USD'\n    )\n  })\n\n  it('adds a pivoted_label property to measure field objects', () => {\n    const { measures } = buildPivotFields({\n      fields: mockFields,\n      pivots: mockPivots,\n    })\n\n    // Check for orders.count - pivot complete object\n    const ordersCountComplete = measures.find(\n      (pivotMeasure) => pivotMeasure.name === 'complete - orders.count'\n    ) || {\n      label: 'faux_label',\n      label_short: 'faux_label_short',\n      pivoted_label: 'faux_pivoted_label',\n    }\n\n    expect(ordersCountComplete.pivoted_label).toBe('Orders Count: Complete')\n  })\n})\n"],"mappings":";;AAKA,SAASA,gBAAgB,QAAQ,oBAAoB;AACrD,SAASC,UAAU,EAAEC,UAAU,QAAQ,aAAa;AAEpDC,QAAQ,CAAC,kBAAkB,EAAE,MAAM;EACjCC,EAAE,CAAC,wEAAwE,EAAE,MAAM;IACjF,MAAMC,iBAAiB,GAAGL,gBAAgB,CAAC;MACzCM,MAAM,EAAEL,UAAU;MAClBM,MAAM,EAAEL;IACV,CAAC,CAAC;IAEF,MAAM;MAAEM,QAAQ,EAAEC;IAAc,CAAC,GAAGJ,iBAAiB;;IAGrDK,MAAM,CAACD,aAAa,CAACE,MAAM,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC;;IAGpC,MAAMC,mBAAmB,GAAGJ,aAAa,CAACK,IAAI,CAC3CC,YAAY,IAAKA,YAAY,CAACC,IAAI,KAAK,yBAAyB,CAClE,IAAI;MAAEC,KAAK,EAAE,YAAY;MAAEC,WAAW,EAAE;IAAmB,CAAC;IAE7DR,MAAM,CAACG,mBAAmB,CAAC,CAACM,GAAG,CAACC,aAAa,EAAE;IAC/CV,MAAM,CAACG,mBAAmB,CAACK,WAAW,CAAC,CAACN,IAAI,CAAC,UAAU,CAAC;IACxDF,MAAM,CAACG,mBAAmB,CAACI,KAAK,CAAC,CAACL,IAAI,CAAC,cAAc,CAAC;;IAGtD,MAAMS,oBAAoB,GAAGZ,aAAa,CAACK,IAAI,CAC5CC,YAAY,IACXA,YAAY,CAACC,IAAI,KACjB,oDAAoD,CACvD,IAAI;MAAEC,KAAK,EAAE,YAAY;MAAEC,WAAW,EAAE;IAAmB,CAAC;IAC7DR,MAAM,CAACW,oBAAoB,CAAC,CAACF,GAAG,CAACC,aAAa,EAAE;IAChDV,MAAM,CAACW,oBAAoB,CAACH,WAAW,CAAC,CAACN,IAAI,CAAC,SAAS,CAAC;IACxDF,MAAM,CAACW,oBAAoB,CAACJ,KAAK,CAAC,CAACL,IAAI,CACrC,0CAA0C,CAC3C;EACH,CAAC,CAAC;EAEFR,EAAE,CAAC,wDAAwD,EAAE,MAAM;IACjE,MAAM;MAAEI;IAAS,CAAC,GAAGR,gBAAgB,CAAC;MACpCM,MAAM,EAAEL,UAAU;MAClBM,MAAM,EAAEL;IACV,CAAC,CAAC;;IAGF,MAAMW,mBAAmB,GAAGL,QAAQ,CAACM,IAAI,CACtCC,YAAY,IAAKA,YAAY,CAACC,IAAI,KAAK,yBAAyB,CAClE,IAAI;MACHC,KAAK,EAAE,YAAY;MACnBC,WAAW,EAAE,kBAAkB;MAC/BI,aAAa,EAAE;IACjB,CAAC;IAEDZ,MAAM,CAACG,mBAAmB,CAACS,aAAa,CAAC,CAACV,IAAI,CAAC,wBAAwB,CAAC;EAC1E,CAAC,CAAC;AACJ,CAAC,CAAC"}