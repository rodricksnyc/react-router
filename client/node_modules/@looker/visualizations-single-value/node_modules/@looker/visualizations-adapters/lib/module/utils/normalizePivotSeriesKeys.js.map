{"version":3,"file":"normalizePivotSeriesKeys.js","names":["buildPivotMeasureName","SEPARATOR","normalizePivotSeriesKeys","rawConfig","entries","Object","map","key","val","pivotPos","lastIndexOf","measureName","substring","length","pivotValue","formattedKey","replace","fromEntries"],"sources":["../../../src/utils/normalizePivotSeriesKeys.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport { buildPivotMeasureName } from '.'\n\n/**\n * Utility converts looker sdk formatted pivot keys (e.g. 'Yes - orders.count') to\n * vis components formatted pivot keys (e.g. 'orders.count|Yes'), and converts\n * the string 'Row Total' to it's original representation ('$$$_row_total_$$$')\n * @param rawConfig is the raw api response for series color overrides\n * @returns series color overrides\n */\n\nconst SEPARATOR = ' - '\n\nexport const normalizePivotSeriesKeys = (rawConfig: {\n  [key: string]: string\n}) => {\n  const entries = Object.entries(rawConfig).map(([key, val]) => {\n    const pivotPos = key.lastIndexOf(SEPARATOR)\n    const measureName = key.substring(pivotPos + SEPARATOR.length)\n    const pivotValue = key.substring(0, pivotPos)\n\n    const formattedKey =\n      pivotPos > -1\n        ? buildPivotMeasureName({\n            measureName,\n            pivotValue: pivotValue.replace(\n              /Row Total/,\n              '$$$$$$_row_total_$$$$$$'\n            ),\n          })\n        : key\n    return [formattedKey, val]\n  })\n  return Object.fromEntries(entries)\n}\n"],"mappings":";;AAKA,SAASA,qBAAqB,QAAQ,GAAG;;AAUzC,MAAMC,SAAS,GAAG,KAAK;AAEvB,OAAO,MAAMC,wBAAwB,GAAIC,SAExC,IAAK;EACJ,MAAMC,OAAO,GAAGC,MAAM,CAACD,OAAO,CAACD,SAAS,CAAC,CAACG,GAAG,CAAC,CAAC,CAACC,GAAG,EAAEC,GAAG,CAAC,KAAK;IAC5D,MAAMC,QAAQ,GAAGF,GAAG,CAACG,WAAW,CAACT,SAAS,CAAC;IAC3C,MAAMU,WAAW,GAAGJ,GAAG,CAACK,SAAS,CAACH,QAAQ,GAAGR,SAAS,CAACY,MAAM,CAAC;IAC9D,MAAMC,UAAU,GAAGP,GAAG,CAACK,SAAS,CAAC,CAAC,EAAEH,QAAQ,CAAC;IAE7C,MAAMM,YAAY,GAChBN,QAAQ,GAAG,CAAC,CAAC,GACTT,qBAAqB,CAAC;MACpBW,WAAW;MACXG,UAAU,EAAEA,UAAU,CAACE,OAAO,CAC5B,WAAW,EACX,yBAAyB;IAE7B,CAAC,CAAC,GACFT,GAAG;IACT,OAAO,CAACQ,YAAY,EAAEP,GAAG,CAAC;EAC5B,CAAC,CAAC;EACF,OAAOH,MAAM,CAACY,WAAW,CAACb,OAAO,CAAC;AACpC,CAAC"}